<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ Hooks ä½¿ç”¨å¤§å…¨ ï¼ˆåŒ…å« React v18 ç‰ˆæœ¬ ï¼‰ | Tk  Wiki</title>
    <meta name="description" content="Tk Wiki">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/assets/style.CzjhztuA.css" as="style">
    
    <script type="module" src="/assets/app.CzIJq6os.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.XlwyxPMj.js">
    <link rel="modulepreload" href="/assets/chunks/theme.CfAYQBOL.js">
    <link rel="modulepreload" href="/assets/pages_reproduce_todo_20230620_3-react.md.BGQgRvBA.lean.js">
    <meta name="theme-color" content="#3eaf7c">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="mask-icon" href="/logo.svg" color="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="tk-wikiã€wikiã€ç¼–ç¨‹å­¦ä¹ ã€vueã€reactã€npmã€githubã€htmlã€cssã€javascriptã€">
    <meta name="author" content="tink">
    <meta property="og:type" content="article">
    <meta name="application-name" content="tk-wiki">
    <meta name="apple-mobile-web-app-title" content="tk-wiki">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.googleapis.com">
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.gstatic.com">
    <meta property="og:description" content="tk-wikiï¼Œè‡ªå»ºå‰ç«¯çŸ¥è¯†åº“ï¼Œä»åŸºç¡€åˆ°å®æˆ˜ã€‚">
    <meta property="og:url" content="https://wiki.tk-292.xyz">
    <meta property="og:locale" content="zh_CN">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle has-sidebar" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo-text.svg" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>Tk  Wiki</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/base/index.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>å‰ç«¯åŸºç¡€</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/advance/index.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>å‰ç«¯è¿›é˜¶</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/common/index.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>å‰ç«¯é€šè¯†</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>é…ç½®</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/cli/index.html" data-v-43f1e123><!--[-->è„šæ‰‹æ¶<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/custom/index.html" data-v-43f1e123><!--[-->ä¸ªäººé…ç½®<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/expand/index.html" data-v-43f1e123><!--[-->çŸ¥è¯†æ‰©å±•<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>å…¶ä»–</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/devlog/index.html" data-v-43f1e123><!--[-->å¼€å‘æ—¥å¿—<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/reproduce/index.html" data-v-43f1e123><!--[-->è½¬è½½æ–‡ç« <!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/tk/index.html" data-v-43f1e123><!--[-->tkåº“<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>2024</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/pages/collect/202403/index.html" data-v-43f1e123><!--[-->202403<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-d2ecc192><button data-v-d2ecc192>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 has-active" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>å¾…å½’æ¡£</h2><!----></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/todo/20230422-websokect.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>WebSocket ï½œæ¦‚å¿µã€åŸç†ã€ç”¨æ³•åŠå®è·µ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/todo/20230505-qiankun.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>æˆ‘ç»ˆäºæŠŠå¾®å‰ç«¯(qiankun)è½åœ°ç”Ÿäº§é¡¹ç›®äº†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/todo/20230620_1-react.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>ææ‡‚è¿™12ä¸ªHooksï¼Œä¿è¯è®©ä½ ç©è½¬React</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/todo/20230620_2-react.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>React æ·±å…¥ã€ä¸€æ–‡åƒé€React v18å…¨éƒ¨Apiï¼ˆ1.3w+ï¼‰</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/todo/20230620_3-react.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ Hooks ä½¿ç”¨å¤§å…¨ ï¼ˆåŒ…å« React v18 ç‰ˆæœ¬ ï¼‰</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>ä»£ç å®è·µ</h2><!----></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/pages/reproduce/practice/base.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>åŸºç¡€ç¯‡</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _pages_reproduce_todo_20230620_3-react" data-v-39a288b8><div><div class="warning custom-block"><p class="custom-block-title">æ–‡ç« éåŸåˆ›</p><p>ä½œè€…ï¼šæˆ‘ä¸æ˜¯å¤–æ˜Ÿäºº</p><p>æ¥æºï¼š<a href="https://juejin.cn/post/7118937685653192735" target="_blank" rel="noreferrer">https://juejin.cn/post/7118937685653192735</a></p><p>æ³¨æ„ï¼šä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œä¼šå¯¹åŸæ–‡è¿›è¡Œä¿®æ”¹æ‰¹æ³¨</p></div><h1 id="ã€Œreact-è¿›é˜¶ã€-react-å…¨éƒ¨-hooks-ä½¿ç”¨å¤§å…¨-åŒ…å«-react-v18-ç‰ˆæœ¬-âœ¨" tabindex="-1">ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ Hooks ä½¿ç”¨å¤§å…¨ ï¼ˆåŒ…å« React v18 ç‰ˆæœ¬ ï¼‰âœ¨ <a class="header-anchor" href="#ã€Œreact-è¿›é˜¶ã€-react-å…¨éƒ¨-hooks-ä½¿ç”¨å¤§å…¨-åŒ…å«-react-v18-ç‰ˆæœ¬-âœ¨" aria-label="Permalink to &quot;ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ Hooks ä½¿ç”¨å¤§å…¨ ï¼ˆåŒ…å« React v18 ç‰ˆæœ¬ ï¼‰âœ¨&quot;">â€‹</a></h1><h2 id="ä¸€-å‰è¨€" tabindex="-1">ä¸€ å‰è¨€ <a class="header-anchor" href="#ä¸€-å‰è¨€" aria-label="Permalink to &quot;ä¸€ å‰è¨€&quot;">â€‹</a></h2><p>React hooks æ˜¯ react16.8 ä»¥åï¼Œreact æ–°å¢çš„é’©å­ APIï¼Œç›®çš„æ˜¯å¢åŠ ä»£ç çš„å¯å¤ç”¨æ€§ï¼Œé€»è¾‘æ€§ï¼Œå¼¥è¡¥æ— çŠ¶æ€ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰æ•°æ®ç®¡ç†çŠ¶æ€ state çš„ç¼ºé™·ã€‚æœ¬ç« èŠ‚ç¬”è€…å°†ä»‹ç»ç›®å‰ React æä¾›çš„æ‰€æœ‰ hooks ï¼Œä»‹ç»å…¶åŠŸèƒ½ç±»å‹å’ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p><p>åˆ›ä½œä¸æ˜“ï¼Œå¸Œæœ›å±å¹•å‰çš„ä½ èƒ½ç»™ç¬”è€…èµä¸ª<strong>èµ</strong>ï¼Œä»¥æ­¤é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œå‰ç«¯ç¡¬æ–‡ã€‚ğŸŒ¹ğŸŒ¹ğŸŒ¹</p><h3 id="_1-1-æŠ€æœ¯èƒŒæ™¯" tabindex="-1">1.1 æŠ€æœ¯èƒŒæ™¯ <a class="header-anchor" href="#_1-1-æŠ€æœ¯èƒŒæ™¯" aria-label="Permalink to &quot;1.1 æŠ€æœ¯èƒŒæ™¯&quot;">â€‹</a></h3><p><strong>react hooks è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p><p>å…ˆè®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ Hooksï¼Œå‡½æ•°ç»„ä»¶èƒ½å¤Ÿåšçš„åªæ˜¯æ¥å— Propsã€æ¸²æŸ“ UI ï¼Œä»¥åŠè§¦å‘çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„äº‹ä»¶ã€‚æ‰€æœ‰çš„å¤„ç†é€»è¾‘éƒ½è¦åœ¨ç±»ç»„ä»¶ä¸­å†™ï¼Œè¿™æ ·ä¼šä½¿ class ç±»ç»„ä»¶å†…éƒ¨é”™ç»¼å¤æ‚ï¼Œæ¯ä¸€ä¸ªç±»ç»„ä»¶éƒ½æœ‰ä¸€å¥—ç‹¬ç‰¹çš„çŠ¶æ€ï¼Œç›¸äº’ä¹‹é—´ä¸èƒ½å¤ç”¨ï¼Œå³ä¾¿æ˜¯ React ä¹‹å‰å‡ºç°è¿‡ mixin ç­‰å¤ç”¨æ–¹å¼ï¼Œä½†æ˜¯ä¼´éšå‡º mixin æ¨¡å¼ä¸‹éšå¼ä¾èµ–ï¼Œä»£ç å†²çªè¦†ç›–ç­‰é—®é¢˜ï¼Œä¹Ÿä¸èƒ½æˆä¸º React çš„ä¸­æµç ¥æŸ±çš„é€»è¾‘å¤ç”¨æ–¹æ¡ˆã€‚æ‰€ä»¥ React æ”¾å¼ƒ mixin è¿™ç§æ–¹å¼ã€‚</p><p>ç±»ç»„ä»¶æ˜¯ä¸€ç§é¢å‘å¯¹è±¡æ€æƒ³çš„ä½“ç°ï¼Œç±»ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ä¼šéšç€åŠŸèƒ½å¢å¼ºè€Œå˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œä»£ç ç»´æŠ¤æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ï¼Œè€Œä¸”ä¸åˆ©äºåæœŸ tree shakingã€‚æ‰€ä»¥æœ‰å¿…è¦åšå‡ºä¸€å¥—å‡½æ•°ç»„ä»¶ä»£æ›¿ç±»ç»„ä»¶çš„æ–¹æ¡ˆï¼Œäºæ˜¯ Hooks ä¹Ÿå°±ç†æ‰€å½“ç„¶çš„è¯ç”Ÿäº†ã€‚</p><p>æ‰€ä»¥ Hooks å‡ºç°æœ¬è´¨ä¸ŠåŸå› æ˜¯ï¼š</p><ul><li><strong>è®©å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½åšç±»ç»„ä»¶çš„äº‹ï¼Œæœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œå¯ä»¥å¤„ç†ä¸€äº›å‰¯ä½œç”¨ï¼Œèƒ½è·å– ref ï¼Œä¹Ÿèƒ½åšæ•°æ®ç¼“å­˜ã€‚</strong></li><li><strong>è§£å†³é€»è¾‘å¤ç”¨éš¾çš„é—®é¢˜ã€‚</strong></li><li><strong>æ”¾å¼ƒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹ã€‚</strong></li></ul><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå®šä¹‰ Hooks ï¼Ÿ</strong></p><p>è‡ªå®šä¹‰ hooks æ˜¯åœ¨ React Hooks åŸºç¡€ä¸Šçš„ä¸€ä¸ªæ‹“å±•ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆ¶å®šæ»¡è¶³ä¸šåŠ¡éœ€è¦çš„ç»„åˆ hooks ï¼Œæ›´æ³¨é‡çš„æ˜¯é€»è¾‘å•å…ƒã€‚é€šè¿‡ä¸šåŠ¡åœºæ™¯ä¸åŒï¼Œåˆ°åº•éœ€è¦ React Hooks åšä»€ä¹ˆï¼Œæ€ä¹ˆæ ·æŠŠä¸€æ®µé€»è¾‘å°è£…èµ·æ¥ï¼Œåšåˆ°å¤ç”¨ï¼Œè¿™æ˜¯è‡ªå®šä¹‰ hooks äº§ç”Ÿçš„åˆè¡·ã€‚</p><p>è‡ªå®šä¹‰ hooks ä¹Ÿå¯ä»¥è¯´æ˜¯ React Hooks èšåˆäº§ç‰©ï¼Œå…¶å†…éƒ¨æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª React Hooks ç»„æˆï¼Œç”¨äºè§£å†³ä¸€äº›å¤æ‚é€»è¾‘ã€‚</p><h3 id="_1-2-æŠ€æœ¯æ„¿æ™¯" tabindex="-1">1.2 æŠ€æœ¯æ„¿æ™¯ <a class="header-anchor" href="#_1-2-æŠ€æœ¯æ„¿æ™¯" aria-label="Permalink to &quot;1.2 æŠ€æœ¯æ„¿æ™¯&quot;">â€‹</a></h3><p>ç›®å‰ hooks å·²ç»æˆä¸º React ä¸»æµçš„å¼€å‘æ‰‹æ®µï¼ŒReact ç”Ÿæ€ä¹Ÿæ—¥ç›Šæœç€ hooks æ–¹å‘å‘å±•ï¼Œæ¯”å¦‚ React Router, React Redux ç­‰ï¼Œ hooks ä¹Ÿæ›´å¥‘åˆ React ç”Ÿæ€åº“çš„åº”ç”¨ã€‚</p><p>éšç€é¡¹ç›®åŠŸèƒ½æ¨¡å—è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸€äº›å…¬å…±é€»è¾‘ä¸èƒ½æœ‰æ•ˆçš„å¤ç”¨ï¼Œè¿™äº›é€»è¾‘éœ€è¦å’Œä¸šåŠ¡ä»£ç å¼ºå…³è”åˆ°ä¸€èµ·ï¼Œè¿™æ ·ä¼šè®©æ•´ä½“å·¥ç¨‹è‡ƒè‚¿ï¼ŒåŠŸèƒ½ä¸èƒ½å¤ç”¨ï¼Œå¦‚æœæ¶‰åŠåˆ°ä¿®æ”¹é€»è¾‘ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ç‰µä¸€å‘åŠ¨å…¨èº«ã€‚</p><p>æ‰€ä»¥æœ‰å¿…è¦ä½¿ç”¨è‡ªå®šä¹‰ hooks çš„æ–¹å¼ï¼Œhooks å¯ä»¥æŠŠé‡å¤çš„é€»è¾‘æŠ½ç¦»å‡ºå»ï¼Œæ ¹æ®éœ€è¦åˆ›å»ºå’Œä¸šåŠ¡åŠŸèƒ½ç»‘å®šçš„ä¸šåŠ¡å‹ hooks ï¼Œæˆ–è€…æ˜¯æ ¹æ®å…·ä½“åŠŸèƒ½åˆ›å»ºçš„åŠŸèƒ½å‹ hooks ã€‚</p><h3 id="_1-3-åŠŸèƒ½æ¦‚è§ˆ" tabindex="-1">1.3 åŠŸèƒ½æ¦‚è§ˆ <a class="header-anchor" href="#_1-3-åŠŸèƒ½æ¦‚è§ˆ" aria-label="Permalink to &quot;1.3 åŠŸèƒ½æ¦‚è§ˆ&quot;">â€‹</a></h3><p>åœ¨ React çš„ä¸–ç•Œä¸­ï¼Œä¸åŒçš„ hooks ä½¿å‘½ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œæˆ‘è¿™é‡Œå¯¹ React hooks æŒ‰ç…§åŠŸèƒ½åˆ†ç±»ï¼Œåˆ†æˆäº† <strong>æ•°æ®æ›´æ–°é©±åŠ¨</strong>ï¼Œ<strong>çŠ¶æ€è·å–ä¸ä¼ é€’ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼ŒçŠ¶æ€æ´¾ç”Ÿä¸ä¿å­˜ï¼Œå’Œå·¥å…·ç±»å‹ï¼Œ</strong> å…·ä½“åŠŸèƒ½åˆ’åˆ†å’Œä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/69822a1b61e64ee29b8125592e1ee035~tplv-k3u1fbpfcp-watermark.image?" alt="WechatIMG32.png"></p><h2 id="äºŒ-hooks-ä¹‹æ•°æ®æ›´æ–°é©±åŠ¨" tabindex="-1">äºŒ hooks ä¹‹æ•°æ®æ›´æ–°é©±åŠ¨ <a class="header-anchor" href="#äºŒ-hooks-ä¹‹æ•°æ®æ›´æ–°é©±åŠ¨" aria-label="Permalink to &quot;äºŒ hooks ä¹‹æ•°æ®æ›´æ–°é©±åŠ¨&quot;">â€‹</a></h2><h3 id="_2-1-usestate" tabindex="-1">2.1 useState <a class="header-anchor" href="#_2-1-usestate" aria-label="Permalink to &quot;2.1 useState&quot;">â€‹</a></h3><p>useState å¯ä»¥ä½¿å‡½æ•°ç»„ä»¶åƒç±»ç»„ä»¶ä¸€æ ·æ‹¥æœ‰ stateï¼Œå‡½æ•°ç»„ä»¶é€šè¿‡ useState å¯ä»¥è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–°è§†å›¾ã€‚</p><p><strong>useState åŸºç¡€ä»‹ç»ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ â‘ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , â‘¡</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(â‘¢initData)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>â‘  stateï¼Œç›®çš„æä¾›ç»™ UI ï¼Œä½œä¸ºæ¸²æŸ“è§†å›¾çš„æ•°æ®æºã€‚</p><p>â‘¡ dispatchAction æ”¹å˜ state çš„å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨åŠ¨å‡½æ•°ç»„ä»¶æ¸²æŸ“çš„æ¸²æŸ“å‡½æ•°ã€‚</p><p>â‘¢ initData æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æƒ…å†µæ˜¯éå‡½æ•°ï¼Œå°†ä½œä¸º state åˆå§‹åŒ–çš„å€¼ã€‚ ç¬¬äºŒç§æƒ…å†µæ˜¯å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸º useState åˆå§‹åŒ–çš„å€¼ã€‚</p><p><strong>useState åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* numberä¸ºæ­¤æ—¶stateè¯»å–å€¼ ï¼ŒsetNumberä¸ºæ´¾å‘æ›´æ–°çš„å‡½æ•° */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [number, setNumber] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 0ä¸ºåˆå§‹å€¼ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{number}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* è¿™é‡Œçš„numberæ˜¯ä¸èƒ½å¤Ÿå³ä½¿æ”¹å˜çš„  */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>useState æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>â‘  åœ¨å‡½æ•°ç»„ä»¶ä¸€æ¬¡æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œstate çš„å€¼æ˜¯å›ºå®šä¸å˜çš„ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ­¤æ—¶ number ä¸€ç›´éƒ½æ˜¯ 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{handleClick}&gt; ç‚¹å‡» {number}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>â‘¡ å¦‚æœä¸¤æ¬¡ dispatchAction ä¼ å…¥ç›¸åŒçš„ state å€¼ï¼Œé‚£ä¹ˆç»„ä»¶å°±ä¸ä¼šæ›´æ–°ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dispatchState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alien&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç‚¹å‡»æŒ‰é’®ï¼Œè§†å›¾æ²¡æœ‰æ›´æ–°ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    state.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Alien&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    dispatchState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›´æ¥æ”¹å˜ `state`ï¼Œåœ¨å†…å­˜ä¸­æŒ‡å‘çš„åœ°å€ç›¸åŒã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {state.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{handleClick}&gt;changeName++&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>â‘¢ å½“è§¦å‘ dispatchAction åœ¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è·å–ä¸åˆ°æœ€æ–°çš„ state, åªæœ‰å†ä¸‹ä¸€æ¬¡ç»„ä»¶ rerender ä¸­æ‰èƒ½è·å–åˆ°ã€‚</p><h3 id="_2-2-usereducer" tabindex="-1">2.2 useReducer <a class="header-anchor" href="#_2-2-usereducer" aria-label="Permalink to &quot;2.2 useReducer&quot;">â€‹</a></h3><p>useReducer æ˜¯ react-hooks æä¾›çš„èƒ½å¤Ÿåœ¨æ— çŠ¶æ€ç»„ä»¶ä¸­è¿è¡Œçš„ç±»ä¼¼ redux çš„åŠŸèƒ½ api ã€‚</p><p><strong>useReducer åŸºç¡€ä»‹ç»ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ â‘ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , â‘¡</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useReducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(â‘¢reducer)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>â‘  æ›´æ–°ä¹‹åçš„ state å€¼ã€‚</p><p>â‘¡ æ´¾å‘æ›´æ–°çš„ dispatchAction å‡½æ•°, æœ¬è´¨ä¸Šå’Œ useState çš„ dispatchAction æ˜¯ä¸€æ ·çš„ã€‚</p><p>â‘¢ ä¸€ä¸ªå‡½æ•° reducer ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ª redux ä¸­çš„ reducer , reducer çš„å‚æ•°å°±æ˜¯å¸¸è§„ reducer é‡Œé¢çš„ state å’Œ action, è¿”å›æ”¹å˜åçš„ state, è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹å°±æ˜¯ï¼š<strong>å¦‚æœè¿”å›çš„ state å’Œä¹‹å‰çš„ state ï¼Œå†…å­˜æŒ‡å‘ç›¸åŒï¼Œé‚£ä¹ˆç»„ä»¶å°†ä¸ä¼šæ›´æ–°ã€‚</strong></p><p><strong>useReducer åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoUseReducer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* numberä¸ºæ›´æ–°åçš„stateå€¼,  dispatchNumbner ä¸ºå½“å‰çš„æ´¾å‘å‡½æ•° */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dispatchNumbner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useReducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">payload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> action;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* returnçš„å€¼ä¸ºæ–°çš„state */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (name) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;add&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;reset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payload;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      å½“å‰å€¼ï¼š{number}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ´¾å‘æ›´æ–° */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatchNumbner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;add&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })}&gt;å¢åŠ &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatchNumbner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })}&gt;å‡å°‘&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatchNumbner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, payload: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">666</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æŠŠdispatch å’Œ state ä¼ é€’ç»™å­ç»„ä»¶  */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyChildren</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dispatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{dispatchNumbner} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ number }} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_2-3-usesyncexternalstore" tabindex="-1">2.3 useSyncExternalStore <a class="header-anchor" href="#_2-3-usesyncexternalstore" aria-label="Permalink to &quot;2.3 useSyncExternalStore&quot;">â€‹</a></h3><p>useSyncExternalStore çš„è¯ç”Ÿå¹¶éå¶ç„¶ï¼Œå’Œ v18 çš„æ›´æ–°æ¨¡å¼ä¸‹å¤–éƒ¨æ•°æ®çš„ tearing æœ‰ç€ååˆ†ç´§å¯†çš„å…³è”ã€‚useSyncExternalStore èƒ½å¤Ÿè®© React ç»„ä»¶åœ¨ concurrent æ¨¡å¼ä¸‹å®‰å…¨åœ°æœ‰æ•ˆåœ°è¯»å–å¤–æ¥æ•°æ®æºï¼Œåœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­èƒ½å¤Ÿæ£€æµ‹åˆ°å˜åŒ–ï¼Œå¹¶ä¸”åœ¨æ•°æ®æºå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè°ƒåº¦æ›´æ–°ã€‚å½“è¯»å–åˆ°å¤–éƒ¨çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä¼šè§¦å‘ä¸€ä¸ªå¼ºåˆ¶æ›´æ–°ï¼Œæ¥ä¿è¯ç»“æœçš„ä¸€è‡´æ€§ã€‚</p><p><strong>useSyncExternalStore åŸºç¡€ä»‹ç»ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useSyncExternalStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(subscribe, getSnapshot, getServerSnapshot);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>â‘  subscribe ä¸ºè®¢é˜…å‡½æ•°ï¼Œå½“æ•°æ®æ”¹å˜çš„æ—¶å€™ï¼Œä¼šè§¦å‘ subscribeï¼Œåœ¨ useSyncExternalStore ä¼šé€šè¿‡å¸¦æœ‰è®°å¿†æ€§çš„ getSnapshot æ¥åˆ¤åˆ«æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¼šå¼ºåˆ¶æ›´æ–°æ•°æ®ã€‚</p><p>â‘¡ getSnapshot å¯ä»¥ç†è§£æˆä¸€ä¸ªå¸¦æœ‰è®°å¿†åŠŸèƒ½çš„é€‰æ‹©å™¨ã€‚å½“ store å˜åŒ–çš„æ—¶å€™ï¼Œä¼šé€šè¿‡ getSnapshot ç”Ÿæˆæ–°çš„çŠ¶æ€å€¼ï¼Œè¿™ä¸ªçŠ¶æ€å€¼å¯æä¾›ç»™ç»„ä»¶ä½œä¸ºæ•°æ®æºä½¿ç”¨ï¼ŒgetSnapshot å¯ä»¥æ£€æŸ¥è®¢é˜…çš„å€¼æ˜¯å¦æ”¹å˜ï¼Œæ”¹å˜çš„è¯é‚£ä¹ˆä¼šè§¦å‘æ›´æ–°ã€‚</p><p>â‘¢ getServerSnapshot ç”¨äº hydration æ¨¡å¼ä¸‹çš„ getSnapshotã€‚</p><p><strong>useSyncExternalStore åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { combineReducers, createStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;redux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* number Reducer */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> numberReducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (action.type) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ADD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DEL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ³¨å†Œreducer */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rootReducer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> combineReducers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ number: numberReducer });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* åˆ›å»º store */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rootReducer, { number: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* è®¢é˜…å¤–éƒ¨æ•°æ®æº */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useSyncExternalStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    store.subscribe,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {state}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ADD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })}&gt;ç‚¹å‡»&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>ç‚¹å‡»æŒ‰é’®ï¼Œä¼šè§¦å‘ reducer ï¼Œç„¶åä¼šè§¦å‘ store.subscribe è®¢é˜…å‡½æ•°ï¼Œæ‰§è¡Œ getSnapshot å¾—åˆ°æ–°çš„ number ï¼Œåˆ¤æ–­ number æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå˜åŒ–ï¼Œè§¦å‘æ›´æ–°ã€‚</p><h3 id="_2-4-usetransition" tabindex="-1">2.4 useTransition <a class="header-anchor" href="#_2-4-usetransition" aria-label="Permalink to &quot;2.4 useTransition&quot;">â€‹</a></h3><p>åœ¨ React v18 ä¸­ï¼Œæœ‰ä¸€ç§æ–°æ¦‚å¿µå«åšè¿‡æ¸¡ä»»åŠ¡ï¼Œè¿™ç§ä»»åŠ¡æ˜¯å¯¹æ¯”ç«‹å³æ›´æ–°ä»»åŠ¡è€Œäº§ç”Ÿçš„ï¼Œé€šå¸¸ä¸€äº›å½±å“ç”¨æˆ·äº¤äº’ç›´è§‚å“åº”çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æŒ‰é”®ï¼Œç‚¹å‡»ï¼Œè¾“å…¥ç­‰ï¼Œè¿™äº›ä»»åŠ¡éœ€è¦è§†å›¾ä¸Šç«‹å³å“åº”ï¼Œæ‰€ä»¥å¯ä»¥ç§°ä¹‹ä¸ºç«‹å³æ›´æ–°çš„ä»»åŠ¡ï¼Œä½†æ˜¯æœ‰ä¸€äº›æ›´æ–°ä¸æ˜¯é‚£ä¹ˆæ€¥è¿«ï¼Œæ¯”å¦‚é¡µé¢ä»ä¸€ä¸ªçŠ¶æ€è¿‡æ¸¡åˆ°å¦å¤–ä¸€ä¸ªçŠ¶æ€ï¼Œè¿™äº›ä»»åŠ¡å°±å«åšè¿‡æ¸¡ä»»åŠ¡ã€‚ æ‰“ä¸ªæ¯”æ–¹å¦‚ä¸‹å›¾å½“ç‚¹å‡» tab ä» tab1 åˆ‡æ¢åˆ° tab2 çš„æ—¶å€™ï¼Œæœ¬è´¨ä¸Šäº§ç”Ÿäº†ä¸¤ä¸ªæ›´æ–°ä»»åŠ¡ã€‚</p><ul><li><p>ç¬¬ä¸€ä¸ªå°±æ˜¯ hover çŠ¶æ€ç”± tab1 å˜æˆ tab2ã€‚</p></li><li><p>ç¬¬äºŒä¸ªå°±æ˜¯å†…å®¹åŒºåŸŸç”± tab1 å†…å®¹å˜æ¢åˆ° tab2 å†…å®¹ã€‚</p></li></ul><p>è¿™ä¸¤ä¸ªä»»åŠ¡ï¼Œç”¨æˆ·è‚¯å®šå¸Œæœ› hover çŠ¶æ€çš„å“åº”æ›´è¿…é€Ÿï¼Œè€Œå†…å®¹çš„å“åº”æœ‰å¯èƒ½è¿˜éœ€è¦è¯·æ±‚æ•°æ®ç­‰æ“ä½œï¼Œæ‰€ä»¥æ›´æ–°çŠ¶æ€å¹¶ä¸æ˜¯ç«‹é©¬ç”Ÿæ•ˆï¼Œé€šå¸¸è¿˜ä¼šæœ‰ä¸€äº› loading æ•ˆæœã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªä»»åŠ¡ä½œä¸º<strong>ç«‹å³æ‰§è¡Œä»»åŠ¡</strong>ï¼Œè€Œç¬¬äºŒä¸ªä»»åŠ¡å°±å¯ä»¥è§†ä¸º<strong>è¿‡æ¸¡ä»»åŠ¡</strong>ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07c521e445a5419f8ebc57cf9e5e5e61~tplv-k3u1fbpfcp-watermark.image?" alt="WechatIMG6496.jpeg"></p><p><strong>useTransition åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useTransition æ‰§è¡Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æœ‰ä¸¤ä¸ªçŠ¶æ€å€¼ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯ï¼Œå½“å¤„äºè¿‡æ¸¡çŠ¶æ€çš„æ ‡å¿—â€”â€”isPendingã€‚</li><li>ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºä¸Šè¿°çš„ startTransitionã€‚å¯ä»¥æŠŠé‡Œé¢çš„æ›´æ–°ä»»åŠ¡å˜æˆè¿‡æ¸¡ä»»åŠ¡ã€‚</li></ul><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useTransition } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ä½¿ç”¨ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isPending</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">startTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>useTransition åŸºç¡€ç”¨æ³•ï¼š</strong></p><p>é™¤äº†ä¸Šè¿°åˆ‡æ¢ tab åœºæ™¯å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåœºæ™¯éå¸¸é€‚åˆ useTransition äº§ç”Ÿçš„è¿‡æ¸¡ä»»åŠ¡ï¼Œæ¯”å¦‚è¾“å…¥å†…å®¹ï¼Œå®æ—¶æœç´¢å¹¶å±•ç¤ºæ•°æ®ï¼Œè¿™æœ¬è´¨ä¸Šä¹Ÿæ˜¯æœ‰ä¸¤ä¸ªä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡å°±æ˜¯å—æ§è¡¨å•çš„å®æ—¶å“åº”ï¼›ç¬¬äºŒä¸ªå°±æ˜¯è¾“å…¥å†…å®¹æ”¹å˜,æ•°æ®å±•ç¤ºçš„å˜åŒ–ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å†™ä¸€ä¸ª demo æ¥çœ‹ä¸€ä¸‹ useTransition çš„åŸºæœ¬ä½¿ç”¨ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ¨¡æ‹Ÿæ•°æ® */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mockList1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mockList2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mockList3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tab1: mockList1,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tab2: mockList2,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tab3: mockList3,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setActive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//éœ€è¦ç«‹å³å“åº”çš„ä»»åŠ¡ï¼Œç«‹å³æ›´æ–°ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">renderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setRenderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tab[active]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä¸éœ€è¦ç«‹å³å“åº”çš„ä»»åŠ¡ï¼Œè¿‡æ¸¡ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isPending</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">startTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleChangeTab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">activeItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setActive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(activeItem); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç«‹å³æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    startTransition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // startTransition é‡Œé¢çš„ä»»åŠ¡ä¼˜å…ˆçº§ä½</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setRenderData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tab[activeItem]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tab).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;active&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleChangeTab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item)}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {item}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {isPending </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; loading... &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {renderData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{item}&gt;{item}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>å¦‚ä¸Šå½“åˆ‡æ¢ tab çš„æ—¶å€™ï¼Œäº§ç”Ÿäº†ä¸¤ä¸ªä¼˜å…ˆçº§ä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯ setActive æ§åˆ¶ tab active çŠ¶æ€çš„æ”¹å˜ï¼Œç¬¬äºŒä¸ªä»»åŠ¡ä¸º setRenderData æ§åˆ¶æ¸²æŸ“çš„é•¿åˆ—è¡¨æ•°æ® ï¼ˆåœ¨ç°å®åœºæ™¯ä¸‹é•¿åˆ—è¡¨å¯èƒ½æ˜¯ä¸€äº›æ•°æ®é‡å¤§çš„å¯è§†åŒ–å›¾è¡¨ï¼‰ã€‚</p><h3 id="_2-5-usedeferredvalue" tabindex="-1">2.5 useDeferredValue <a class="header-anchor" href="#_2-5-usedeferredvalue" aria-label="Permalink to &quot;2.5 useDeferredValue&quot;">â€‹</a></h3><p>React 18 æä¾›äº† useDeferredValue å¯ä»¥è®©çŠ¶æ€æ»åæ´¾ç”Ÿã€‚useDeferredValue çš„å®ç°æ•ˆæœä¹Ÿç±»ä¼¼äº transtionï¼Œå½“è¿«åˆ‡çš„ä»»åŠ¡æ‰§è¡Œåï¼Œå†å¾—åˆ°æ–°çš„çŠ¶æ€ï¼Œè€Œè¿™ä¸ªæ–°çš„çŠ¶æ€å°±ç§°ä¹‹ä¸º DeferredValueã€‚</p><p><strong>useDeferredValue åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useDeferredValue å’Œä¸Šè¿° useTransition æœ¬è´¨ä¸Šæœ‰ä»€ä¹ˆå¼‚åŒå‘¢ï¼Ÿ</p><p><br><strong>ç›¸åŒç‚¹ï¼š</strong> useDeferredValue æœ¬è´¨ä¸Šå’Œå†…éƒ¨å®ç°ä¸ useTransition ä¸€æ ·éƒ½æ˜¯æ ‡è®°æˆäº†è¿‡æ¸¡æ›´æ–°ä»»åŠ¡ã€‚</p><p><strong>ä¸åŒç‚¹ï¼š</strong> useTransition æ˜¯æŠŠ startTransition å†…éƒ¨çš„æ›´æ–°ä»»åŠ¡å˜æˆäº†è¿‡æ¸¡ä»»åŠ¡ transtion,è€Œ useDeferredValue æ˜¯æŠŠåŸå€¼é€šè¿‡è¿‡æ¸¡ä»»åŠ¡å¾—åˆ°æ–°çš„å€¼ï¼Œè¿™ä¸ªå€¼ä½œä¸ºå»¶æ—¶çŠ¶æ€ã€‚ ä¸€ä¸ªæ˜¯å¤„ç†ä¸€æ®µé€»è¾‘ï¼Œå¦ä¸€ä¸ªæ˜¯ç”Ÿäº§ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚</p><p>useDeferredValue æ¥å—ä¸€ä¸ªå‚æ•° value ï¼Œä¸€èˆ¬ä¸ºå¯å˜çš„ state , è¿”å›ä¸€ä¸ªå»¶æ—¶çŠ¶æ€ deferrredValueã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deferrredValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useDeferredValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>useDeferredValue åŸºç¡€ç”¨æ³•ï¼š</strong></p><p>æ¥ä¸‹æ¥æŠŠä¸Šè¾¹é‚£ä¸ªä¾‹å­ç”¨ useDeferredValue æ¥å®ç°ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setActive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//éœ€è¦ç«‹å³å“åº”çš„ä»»åŠ¡ï¼Œç«‹å³æ›´æ–°ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deferActive</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useDeferredValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(active); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŠŠçŠ¶æ€å»¶æ—¶æ›´æ–°ï¼Œç±»ä¼¼äºè¿‡æ¸¡ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleChangeTab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">activeItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setActive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(activeItem); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç«‹å³æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> renderData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tab[deferActive]; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨æ»åçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tab&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tab).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;active&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleChangeTab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item)}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {item}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {renderData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{item}&gt;{item}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>å¦‚ä¸Š active ä¸ºæ­£å¸¸æ”¹å˜çš„çŠ¶æ€ï¼ŒdeferActive ä¸ºæ»åçš„ active çŠ¶æ€ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­£å¸¸çŠ¶æ€å»æ”¹å˜ tab çš„ active çŠ¶æ€ï¼Œä½¿ç”¨æ»åçš„çŠ¶æ€å»æ›´æ–°è§†å›¾ï¼ŒåŒæ ·è¾¾åˆ°äº†æå‡ç”¨æˆ·ä½“éªŒçš„ä½œç”¨ã€‚</p><h2 id="ä¸‰-hooks-ä¹‹æ‰§è¡Œå‰¯ä½œç”¨" tabindex="-1">ä¸‰ hooks ä¹‹æ‰§è¡Œå‰¯ä½œç”¨ <a class="header-anchor" href="#ä¸‰-hooks-ä¹‹æ‰§è¡Œå‰¯ä½œç”¨" aria-label="Permalink to &quot;ä¸‰ hooks ä¹‹æ‰§è¡Œå‰¯ä½œç”¨&quot;">â€‹</a></h2><h3 id="_3-1-useeffect" tabindex="-1">3.1 useEffect <a class="header-anchor" href="#_3-1-useeffect" aria-label="Permalink to &quot;3.1 useEffect&quot;">â€‹</a></h3><p>React hooks ä¹Ÿæä¾›äº† api ï¼Œç”¨äºå¼¥è¡¥å‡½æ•°ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç¼ºé™·ã€‚å…¶æœ¬è´¨ä¸»è¦æ˜¯è¿ç”¨äº† hooks é‡Œé¢çš„ useEffect ï¼Œ useLayoutEffectï¼Œè¿˜æœ‰ useInsertionEffectã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯ useEffect ã€‚æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ useEffect çš„ä½¿ç”¨ã€‚</p><p><strong>useEffect åŸºç¡€ä»‹ç»ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> destory;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, dep);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>useEffect ç¬¬ä¸€ä¸ªå‚æ•° callback, è¿”å›çš„ destory ï¼Œ destory ä½œä¸ºä¸‹ä¸€æ¬¡ callback æ‰§è¡Œä¹‹å‰è°ƒç”¨ï¼Œç”¨äºæ¸…é™¤ä¸Šä¸€æ¬¡ callback äº§ç”Ÿçš„å‰¯ä½œç”¨ã€‚</p><p>ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºä¾èµ–é¡¹ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥æœ‰å¤šä¸ªä¾èµ–é¡¹ï¼Œä¾èµ–é¡¹æ”¹å˜ï¼Œæ‰§è¡Œä¸Šä¸€æ¬¡ callback è¿”å›çš„ destory ï¼Œå’Œæ‰§è¡Œæ–°çš„ effect ç¬¬ä¸€ä¸ªå‚æ•° callback ã€‚</p><p>å¯¹äº useEffect æ‰§è¡Œï¼Œ React å¤„ç†é€»è¾‘æ˜¯é‡‡ç”¨å¼‚æ­¥è°ƒç”¨ ï¼Œå¯¹äºæ¯ä¸€ä¸ª effect çš„ callbackï¼Œ React ä¼šå‘ setTimeout å›è°ƒå‡½æ•°ä¸€æ ·ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰åˆ°ä¸»çº¿ç¨‹ä»»åŠ¡å®Œæˆï¼ŒDOM æ›´æ–°ï¼Œjs æ‰§è¡Œå®Œæˆï¼Œè§†å›¾ç»˜åˆ¶å®Œæ¯•ï¼Œæ‰æ‰§è¡Œã€‚æ‰€ä»¥ effect å›è°ƒå‡½æ•°ä¸ä¼šé˜»å¡æµè§ˆå™¨ç»˜åˆ¶è§†å›¾ã€‚</p><p><strong>useEffect åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ¨¡æ‹Ÿæ•°æ®äº¤äº’ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: a,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Demo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">userMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setUserMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* æ¨¡æ‹Ÿäº‹ä»¶ç›‘å¬å¤„ç†å‡½æ•° */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleResize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* useEffectä½¿ç”¨ ï¼Œè¿™é‡Œå¦‚æœä¸åŠ é™åˆ¶ ï¼Œä¼šæ˜¯å‡½æ•°é‡å¤æ‰§è¡Œï¼Œé™·å…¥æ­»å¾ªç¯*/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* è¯·æ±‚æ•°æ® */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setUserMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* å®šæ—¶å™¨ å»¶æ—¶å™¨ç­‰ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> timer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">666</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* æ“ä½œdom  */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(div.current); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* div */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* äº‹ä»¶ç›‘å¬ç­‰ */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleResize);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* æ­¤å‡½æ•°ç”¨äºæ¸…é™¤å‰¯ä½œç”¨ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleResize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* åªæœ‰å½“props-&gt;aå’Œstate-&gt;numberæ”¹å˜çš„æ—¶å€™ ,useEffectå‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œ ï¼Œå¦‚æœæ­¤æ—¶æ•°ç»„ä¸ºç©º[]ï¼Œè¯æ˜å‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ç›¸å½“äºcomponentDidMount */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [a, number]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{div}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{userMessage.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{userMessage.age}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)}&gt;{number}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>å¦‚ä¸Šåœ¨ useEffect ä¸­åšçš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>â‘  è¯·æ±‚æ•°æ®ã€‚</li><li>â‘¡ è®¾ç½®å®šæ—¶å™¨,å»¶æ—¶å™¨ç­‰ã€‚</li><li>â‘¢ æ“ä½œ dom , åœ¨ React Native ä¸­å¯ä»¥é€šè¿‡ ref è·å–å…ƒç´ ä½ç½®ä¿¡æ¯ç­‰å†…å®¹ã€‚</li><li>â‘£ æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨, äº‹ä»¶ç»‘å®šï¼Œåœ¨ React Native ä¸­å¯ä»¥æ³¨å†Œ NativeEventEmitter ã€‚</li><li>â‘¤ è¿˜å¯ä»¥æ¸…é™¤å®šæ—¶å™¨ï¼Œå»¶æ—¶å™¨ï¼Œè§£ç»‘äº‹ä»¶ç›‘å¬å™¨ç­‰ã€‚</li></ul><h3 id="_3-2-uselayouteffect" tabindex="-1">3.2 useLayoutEffect <a class="header-anchor" href="#_3-2-uselayouteffect" aria-label="Permalink to &quot;3.2 useLayoutEffect&quot;">â€‹</a></h3><p><strong>useLayoutEffect åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useLayoutEffect å’Œ useEffect ä¸åŒçš„åœ°æ–¹æ˜¯é‡‡ç”¨äº†åŒæ­¥æ‰§è¡Œï¼Œé‚£ä¹ˆå’Œ useEffect æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>â‘  é¦–å…ˆ useLayoutEffect æ˜¯åœ¨ DOM æ›´æ–°ä¹‹åï¼Œæµè§ˆå™¨ç»˜åˆ¶ä¹‹å‰ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ä¿®æ”¹ DOMï¼Œè·å– DOM ä¿¡æ¯ï¼Œè¿™æ ·æµè§ˆå™¨åªä¼šç»˜åˆ¶ä¸€æ¬¡ï¼Œå¦‚æœä¿®æ”¹ DOM å¸ƒå±€æ”¾åœ¨ useEffect ï¼Œé‚£ useEffect æ‰§è¡Œæ˜¯åœ¨æµè§ˆå™¨ç»˜åˆ¶è§†å›¾ä¹‹åï¼Œæ¥ä¸‹æ¥åˆæ”¹ DOM ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨å†æ¬¡å›æµå’Œé‡ç»˜ã€‚è€Œä¸”ç”±äºä¸¤æ¬¡ç»˜åˆ¶ï¼Œè§†å›¾ä¸Šå¯èƒ½ä¼šé€ æˆé—ªç°çªå…€çš„æ•ˆæœã€‚</p><p>â‘¡ useLayoutEffect callback ä¸­ä»£ç æ‰§è¡Œä¼šé˜»å¡æµè§ˆå™¨ç»˜åˆ¶ã€‚</p><p><strong>useEffect åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoUseLayoutEffect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useLayoutEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /*æˆ‘ä»¬éœ€è¦åœ¨domç»˜åˆ¶ä¹‹å‰ï¼Œç§»åŠ¨domåˆ°åˆ¶å®šä½ç½®*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPositon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* è·å–è¦ç§»åŠ¨çš„ x,yåæ ‡ */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target.current, { x, y });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{target} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;animate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_3-3-useinsertioneffect" tabindex="-1">3.3 useInsertionEffect <a class="header-anchor" href="#_3-3-useinsertioneffect" aria-label="Permalink to &quot;3.3 useInsertionEffect&quot;">â€‹</a></h3><p><strong>useInsertionEffect åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useInsertionEffect æ˜¯åœ¨ React v18 æ–°æ·»åŠ çš„ hooks ï¼Œå®ƒçš„ç”¨æ³•å’Œ useEffect å’Œ useLayoutEffect ä¸€æ ·ã€‚é‚£ä¹ˆè¿™ä¸ª hooks ç”¨äºä»€ä¹ˆå‘¢?</p><p>åœ¨ä»‹ç» useInsertionEffect ç”¨é€”ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹ useInsertionEffect çš„æ‰§è¡Œæ—¶æœºã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;useEffect æ‰§è¡Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useLayoutEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;useLayoutEffect æ‰§è¡Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useInsertionEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;useInsertionEffect æ‰§è¡Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, []);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ‰“å°ï¼š useInsertionEffect æ‰§è¡Œ -&gt; useLayoutEffect æ‰§è¡Œ -&gt; useEffect æ‰§è¡Œ</p><p>å¯ä»¥çœ‹åˆ° useInsertionEffect çš„æ‰§è¡Œæ—¶æœºè¦æ¯” useLayoutEffect æå‰ï¼ŒuseLayoutEffect æ‰§è¡Œçš„æ—¶å€™ DOM å·²ç»æ›´æ–°äº†ï¼Œä½†æ˜¯åœ¨ useInsertionEffect çš„æ‰§è¡Œçš„æ—¶å€™ï¼ŒDOM è¿˜æ²¡æœ‰æ›´æ–°ã€‚æœ¬è´¨ä¸Š useInsertionEffect ä¸»è¦æ˜¯è§£å†³ CSS-in-JS åœ¨æ¸²æŸ“ä¸­æ³¨å…¥æ ·å¼çš„æ€§èƒ½é—®é¢˜ã€‚è¿™ä¸ª hooks ä¸»è¦æ˜¯åº”ç”¨äºè¿™ä¸ªåœºæ™¯ï¼Œåœ¨å…¶ä»–åœºæ™¯ä¸‹ React ä¸æœŸæœ›ç”¨è¿™ä¸ª hooks ã€‚</p><p><strong>useInsertionEffect æ¨¡æ‹Ÿä½¿ç”¨ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useInsertionEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* åŠ¨æ€åˆ›å»º style æ ‡ç­¾æ’å…¥åˆ° head ä¸­ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       .css-in-js{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         color: red;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         font-size: 20px;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(style);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;css-in-js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; hello , useInsertionEffect &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å¦‚ä¸Šæ¨¡æ‹Ÿäº† useInsertionEffect çš„ä½¿ç”¨ã€‚</p><h2 id="å››-hooks-ä¹‹çŠ¶æ€è·å–ä¸ä¼ é€’" tabindex="-1">å›› hooks ä¹‹çŠ¶æ€è·å–ä¸ä¼ é€’ <a class="header-anchor" href="#å››-hooks-ä¹‹çŠ¶æ€è·å–ä¸ä¼ é€’" aria-label="Permalink to &quot;å›› hooks ä¹‹çŠ¶æ€è·å–ä¸ä¼ é€’&quot;">â€‹</a></h2><h3 id="_4-1-usecontext" tabindex="-1">4.1 useContext <a class="header-anchor" href="#_4-1-usecontext" aria-label="Permalink to &quot;4.1 useContext&quot;">â€‹</a></h3><p><strong>useContext åŸºç¡€ä»‹ç»</strong></p><p>å¯ä»¥ä½¿ç”¨ useContext ï¼Œæ¥è·å–çˆ¶çº§ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ context å€¼ï¼Œè¿™ä¸ªå½“å‰å€¼å°±æ˜¯æœ€è¿‘çš„çˆ¶çº§ç»„ä»¶ Provider è®¾ç½®çš„ value å€¼ï¼ŒuseContext å‚æ•°ä¸€èˆ¬æ˜¯ç”± createContext æ–¹å¼åˆ›å»ºçš„ ,ä¹Ÿå¯ä»¥çˆ¶çº§ä¸Šä¸‹æ–‡ context ä¼ é€’çš„ ( å‚æ•°ä¸º context )ã€‚useContext å¯ä»¥ä»£æ›¿ context.Consumer æ¥è·å– Provider ä¸­ä¿å­˜çš„ value å€¼ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contextValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>useContext æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯ context å¯¹è±¡ï¼Œè¿”å›å€¼ä¸º context å¯¹è±¡å†…éƒ¨ä¿å­˜çš„ value å€¼ã€‚</p><p><strong>useContext åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ç”¨useContextæ–¹å¼ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Context);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* my name is alien */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; my name is {value.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ç”¨Context.Consumer æ–¹å¼ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoContext1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Context.Consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*  my name is alien  */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; my name is {value.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Context.Consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Context.Provider</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alien&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DemoContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DemoContext1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Context.Provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_4-2-useref" tabindex="-1">4.2 useRef <a class="header-anchor" href="#_4-2-useref" aria-label="Permalink to &quot;4.2 useRef&quot;">â€‹</a></h3><p><strong>useRef åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useRef å¯ä»¥ç”¨æ¥è·å–å…ƒç´ ï¼Œç¼“å­˜çŠ¶æ€ï¼Œæ¥å—ä¸€ä¸ªçŠ¶æ€ initState ä½œä¸ºåˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ª ref å¯¹è±¡ cur, cur ä¸Šæœ‰ä¸€ä¸ª current å±æ€§å°±æ˜¯ ref å¯¹è±¡éœ€è¦è·å–çš„å†…å®¹ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cur</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(initState);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cur.current);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>useRef åŸºç¡€ç”¨æ³•ï¼š</strong></p><p><strong>useRef è·å– DOM å…ƒ</strong>ç´ ï¼Œåœ¨ React Native ä¸­è™½ç„¶æ²¡æœ‰ DOM å…ƒç´ ï¼Œä½†æ˜¯ä¹Ÿèƒ½å¤Ÿè·å–ç»„ä»¶çš„èŠ‚ç‚¹ä¿¡æ¯ï¼ˆ fiber ä¿¡æ¯ ï¼‰ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoUseRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handerSubmit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /*  &lt;div &gt;è¡¨å•ç»„ä»¶&lt;/div&gt;  dom èŠ‚ç‚¹ */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dom.current);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ref æ ‡è®°å½“å‰domèŠ‚ç‚¹ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{dom}&gt;è¡¨å•ç»„ä»¶&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handerSubmit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}&gt;æäº¤&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å¦‚ä¸Šé€šè¿‡ useRef æ¥è·å– DOM èŠ‚ç‚¹ã€‚</p><p><strong>useRef ä¿å­˜çŠ¶æ€ï¼Œ</strong> å¯ä»¥åˆ©ç”¨ useRef è¿”å›çš„ ref å¯¹è±¡æ¥ä¿å­˜çŠ¶æ€ï¼Œåªè¦å½“å‰ç»„ä»¶ä¸è¢«é”€æ¯ï¼Œé‚£ä¹ˆçŠ¶æ€å°±ä¼šä¸€ç›´å­˜åœ¨ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ”¹å˜çŠ¶æ€ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleChangeStatus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-3-useimperativehandle" tabindex="-1">4.3 useImperativeHandle <a class="header-anchor" href="#_4-3-useimperativehandle" aria-label="Permalink to &quot;4.3 useImperativeHandle&quot;">â€‹</a></h3><p><strong>useImperativeHandle åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useImperativeHandle å¯ä»¥é…åˆ forwardRef è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚è¿™ä¸ªå¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºå­ç»„ä»¶ï¼Œå¦‚æœæ˜¯ class ç±»ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ref è·å–ç±»ç»„ä»¶çš„å®ä¾‹ï¼Œä½†æ˜¯åœ¨å­ç»„ä»¶æ˜¯å‡½æ•°ç»„ä»¶çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡ ref çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ useImperativeHandle å’Œ forwardRef é…åˆå°±èƒ½è¾¾åˆ°æ•ˆæœã€‚</p><p>useImperativeHandle æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>â‘  ç¬¬ä¸€ä¸ªå‚æ•° ref: æ¥å— forWardRef ä¼ é€’è¿‡æ¥çš„ refã€‚</li><li>â‘¡ ç¬¬äºŒä¸ªå‚æ•° createHandle ï¼šå¤„ç†å‡½æ•°ï¼Œè¿”å›å€¼ä½œä¸ºæš´éœ²ç»™çˆ¶ç»„ä»¶çš„ ref å¯¹è±¡ã€‚</li><li>â‘¢ ç¬¬ä¸‰ä¸ªå‚æ•° deps : ä¾èµ–é¡¹ deps ï¼Œä¾èµ–é¡¹æ›´æ”¹å½¢æˆæ–°çš„ ref å¯¹è±¡ã€‚</li></ul><p><strong>useImperativeHandle åŸºç¡€ç”¨æ³•ï¼š</strong></p><p>æˆ‘ä»¬æ¥æ¨¡æ‹Ÿç»™åœºæ™¯ï¼Œç”¨ useImperativeHandleï¼Œä½¿å¾—çˆ¶ç»„ä»¶èƒ½è®©å­ç»„ä»¶ä¸­çš„ input è‡ªåŠ¨èµ‹å€¼å¹¶èšç„¦ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Son</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inputRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">inputValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setInputValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useImperativeHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ref,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> handleRefs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* å£°æ˜æ–¹æ³•ç”¨äºèšç„¦inputæ¡† */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        onFocus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          inputRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* å£°æ˜æ–¹æ³•ç”¨äºæ”¹å˜inputçš„å€¼ */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        onChangeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          setInputValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handleRefs;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·è¾“å…¥å†…å®¹&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{inputRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{inputValue} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ForwarSon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forwardRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Son);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  inputRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  handerClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onFocus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">onChangeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.cur;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onFocus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onChangeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;let us learn React!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ marginTop: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;50px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ForwarSon</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.inputRef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node)} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handerClick.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)}&gt;æ“æ§å­ç»„ä»¶&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7d3ac8bbce64b539b18ebf58a7789f0~tplv-k3u1fbpfcp-watermark.image?" alt="8e8c05f0c82c43719079d4db9536abc0_tplv-k3u1fbpfcp-watermark.gif"></p><h2 id="äº”-hooks-ä¹‹çŠ¶æ€æ´¾ç”Ÿä¸ä¿å­˜" tabindex="-1">äº” hooks ä¹‹çŠ¶æ€æ´¾ç”Ÿä¸ä¿å­˜ <a class="header-anchor" href="#äº”-hooks-ä¹‹çŠ¶æ€æ´¾ç”Ÿä¸ä¿å­˜" aria-label="Permalink to &quot;äº” hooks ä¹‹çŠ¶æ€æ´¾ç”Ÿä¸ä¿å­˜&quot;">â€‹</a></h2><h3 id="_5-1-usememo" tabindex="-1">5.1 useMemo <a class="header-anchor" href="#_5-1-usememo" aria-label="Permalink to &quot;5.1 useMemo&quot;">â€‹</a></h3><p>useMemo å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ render ä¸Šä¸‹æ–‡ä¸­åŒæ­¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°é€»è¾‘ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä½œä¸ºä¸€ä¸ªæ–°çš„çŠ¶æ€ç¼“å­˜èµ·æ¥ã€‚é‚£ä¹ˆè¿™ä¸ª hooks çš„ä½œç”¨å°±æ˜¾è€Œæ˜“è§äº†ï¼š</p><p>åœºæ™¯ä¸€ï¼šåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œéœ€è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­è¿›è¡Œå¤§é‡çš„é€»è¾‘è®¡ç®—ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸æœŸæœ›æ¯ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ¸²æŸ“éƒ½æ‰§è¡Œè¿™äº›å¤æ‚çš„è®¡ç®—é€»è¾‘ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨ useMemo çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œè¿™äº›é€»è¾‘ï¼Œç„¶åæŠŠå¾—åˆ°çš„äº§ç‰©ï¼ˆè®¡ç®—ç»“æœï¼‰ç¼“å­˜èµ·æ¥å°±å¯ä»¥äº†ã€‚</p><p>åœºæ™¯äºŒï¼šReact åœ¨æ•´ä¸ªæ›´æ–°æµç¨‹ä¸­ï¼Œdiff èµ·åˆ°äº†å†³å®šæ€§çš„ä½œç”¨ï¼Œæ¯”å¦‚ Context ä¸­çš„ provider é€šè¿‡ diff value æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°</p><p><strong>useMemo åŸºç¡€ä»‹ç»ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cacheSomething</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMemo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(create, deps);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>â‘  createï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºç¼“å­˜å€¼ï¼Œå¦‚ä¸Š demo ä¸­æŠŠ Children å¯¹åº”çš„ element å¯¹è±¡ï¼Œç¼“å­˜èµ·æ¥ã€‚</li><li>â‘¡ depsï¼š ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾å½“å‰ useMemo çš„ä¾èµ–é¡¹ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå¯¹æ¯” deps ä¾èµ–é¡¹é‡Œé¢çš„çŠ¶æ€ï¼Œæ˜¯å¦æœ‰æ”¹å˜ï¼Œå¦‚æœæœ‰æ”¹å˜é‡æ–°æ‰§è¡Œ create ï¼Œå¾—åˆ°æ–°çš„ç¼“å­˜å€¼ã€‚</li><li>â‘¢ cacheSomethingï¼šè¿”å›å€¼ï¼Œæ‰§è¡Œ create çš„è¿”å›å€¼ã€‚å¦‚æœ deps ä¸­æœ‰ä¾èµ–é¡¹æ”¹å˜ï¼Œè¿”å›çš„é‡æ–°æ‰§è¡Œ create äº§ç”Ÿçš„å€¼ï¼Œå¦åˆ™å–ä¸Šä¸€æ¬¡ç¼“å­˜å€¼ã€‚</li></ul><p><strong>useMemo åŸºç¡€ç”¨æ³•ï¼š</strong></p><p>æ´¾ç”Ÿæ–°çŠ¶æ€ï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> keeper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useKeep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cacheDispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cacheList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hasAliveStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keeper;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* é€šè¿‡ useMemo å¾—åˆ°æ´¾ç”Ÿå‡ºæ¥çš„æ–°çŠ¶æ€ contextValue  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contextValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMemo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      cacheDispatch: cacheDispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keeper),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      hasAliveStatus: hasAliveStatus.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keeper),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      cacheDestory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cacheDispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keeper, { type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ACTION_DESTORY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, payload }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [keeper]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">KeepaliveContext.Provider</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{contextValue}&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">KeepaliveContext.Provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>å¦‚ä¸Šé€šè¿‡ useMemo å¾—åˆ°æ´¾ç”Ÿå‡ºæ¥çš„æ–°çŠ¶æ€ contextValue ï¼Œåªæœ‰ keeper å˜åŒ–çš„æ—¶å€™ï¼Œæ‰æ”¹å˜ Provider çš„ value ã€‚</p><p>ç¼“å­˜è®¡ç®—ç»“æœï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMemo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> computedStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»è¿‡å¤§é‡çš„è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> computedStyle;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{style}&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç¼“å­˜ç»„ä»¶,å‡å°‘å­ç»„ä»¶ rerender æ¬¡æ•°ï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> renderChild</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useMemo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [children]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{renderChild} &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-2-usecallback" tabindex="-1">5.2 useCallback <a class="header-anchor" href="#_5-2-usecallback" aria-label="Permalink to &quot;5.2 useCallback&quot;">â€‹</a></h3><p><strong>useCallback åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useMemo å’Œ useCallback æ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰æ‰§è¡Œï¼Œéƒ½æ˜¯è¿”å›ç¼“å­˜çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº useMemo è¿”å›çš„æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼ŒuseCallback è¿”å›çš„æ˜¯å‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯ç»è¿‡å¤„ç†åçš„ä¹Ÿå°±æ˜¯è¯´çˆ¶ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ç»™å­ç»„ä»¶çš„æ—¶å€™ï¼Œç”±äºæ˜¯æ— çŠ¶æ€ç»„ä»¶æ¯ä¸€æ¬¡éƒ½ä¼šé‡æ–°ç”Ÿæˆæ–°çš„ props å‡½æ•°ï¼Œè¿™æ ·å°±ä½¿å¾—æ¯ä¸€æ¬¡ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ—¶å€™å°±ä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ï¼Œè¿™äº›æ›´æ–°æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ usecallback æ¥å¤„ç†æ­¤å‡½æ•°ï¼Œç„¶åä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p><p><strong>useCallback åŸºç¡€ç”¨æ³•ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ç”¨react.memo */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DemoChildren</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">memo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* åªæœ‰åˆå§‹åŒ–çš„æ—¶å€™æ‰“å°äº† å­ç»„ä»¶æ›´æ–° */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­ç»„ä»¶æ›´æ–°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­ç»„ä»¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å­ç»„ä»¶&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DemoUseCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* æ­¤æ—¶usecallbackçš„ç¬¬ä¸€å‚æ•° (sonName)=&gt;{ console.log(sonName) }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     ç»è¿‡å¤„ç†èµ‹å€¼ç»™ getInfo */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sonName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sonName);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [id]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ç‚¹å‡»æŒ‰é’®è§¦å‘çˆ¶ç»„ä»¶æ›´æ–° ï¼Œä½†æ˜¯å­ç»„ä»¶æ²¡æœ‰æ›´æ–° */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)}&gt;å¢åŠ &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DemoChildren</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{getInfo} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="å…­-hooks-ä¹‹å·¥å…·-hooks" tabindex="-1">å…­ hooks ä¹‹å·¥å…· hooks <a class="header-anchor" href="#å…­-hooks-ä¹‹å·¥å…·-hooks" aria-label="Permalink to &quot;å…­ hooks ä¹‹å·¥å…· hooks&quot;">â€‹</a></h2><h3 id="_6-1-usedebugvalue" tabindex="-1">6.1 useDebugValue <a class="header-anchor" href="#_6-1-usedebugvalue" aria-label="Permalink to &quot;6.1 useDebugValue&quot;">â€‹</a></h3><blockquote><p>æˆ‘ä»¬ä¸æ¨èä½ å‘æ¯ä¸ªè‡ªå®šä¹‰ Hook æ·»åŠ  debug å€¼ã€‚å½“å®ƒä½œä¸ºå…±äº«åº“çš„ä¸€éƒ¨åˆ†æ—¶æ‰æœ€æœ‰ä»·å€¼ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ¼å¼åŒ–å€¼çš„æ˜¾ç¤ºå¯èƒ½æ˜¯ä¸€é¡¹å¼€é”€å¾ˆå¤§çš„æ“ä½œã€‚é™¤ééœ€è¦æ£€æŸ¥ Hookï¼Œå¦åˆ™æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšã€‚å› æ­¤ï¼ŒuseDebugValue æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼ã€‚</p></blockquote><p><strong>useDebugValue åŸºç¡€ä»‹ç»ï¼š</strong></p><p>useDebugValue å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚è¿™ä¸ª hooks ç›®çš„å°±æ˜¯æ£€æŸ¥è‡ªå®šä¹‰ hooksã€‚</p><p><strong>useDebugValue åŸºæœ¬ä½¿ç”¨ï¼š</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useFriendStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">friendID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isOnline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setIsOnline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åœ¨å¼€å‘è€…å·¥å…·ä¸­çš„è¿™ä¸ª Hook æ—è¾¹æ˜¾ç¤ºæ ‡ç­¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // e.g. &quot;FriendStatus: Online&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useDebugValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isOnline </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Online&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Offline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isOnline;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_6-2-useid" tabindex="-1">6.2 useId <a class="header-anchor" href="#_6-2-useid" aria-label="Permalink to &quot;6.2 useId&quot;">â€‹</a></h3><p><strong>useID åŸºç¡€ä»‹ç»:</strong></p><p>useId ä¹Ÿæ˜¯ React v18 äº§ç”Ÿçš„æ–°çš„ hooks , å®ƒå¯ä»¥åœ¨ client å’Œ server ç”Ÿæˆå”¯ä¸€çš„ id , è§£å†³äº†åœ¨æœåŠ¡å™¨æ¸²æŸ“ä¸­ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯äº§ç”Ÿ id ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ä¿éšœäº† React v18 ä¸­ <strong>streaming renderer ï¼ˆæµå¼æ¸²æŸ“ï¼‰</strong> ä¸­ id çš„ç¨³å®šæ€§ã€‚</p><p><strong>ä½ç‰ˆæœ¬ React ssr å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p><p>æ¯”å¦‚åœ¨ä¸€äº›é¡¹ç›®æˆ–è€…æ˜¯å¼€æºåº“ä¸­ç”¨ Math.random() ä½œä¸º ID çš„æ—¶å€™ï¼Œå¯ä»¥ä¼šæœ‰ä¸€äº›éšæœºç”Ÿæˆ id çš„åœºæ™¯ï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;_id_&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ç”Ÿæˆä¸€ä¸ªéšæœºid  */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä½¿ç”¨ rid</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{rid}&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™åœ¨çº¯å®¢æˆ·ç«¯æ¸²æŸ“ä¸­æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼ ç»Ÿæ¨¡å¼ä¸‹éœ€è¦èµ°å¦‚ä¸‹æµç¨‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6194d676b37f41ba9f2b134a513d65c4~tplv-k3u1fbpfcp-watermark.image?" alt="e54da686-6d8e-4431-a378-c05ac49cb6fb.png"></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“æœåŠ¡ç«¯æ¸²æŸ“åˆ° html å’Œ hydrate è¿‡ç¨‹åˆ†åˆ«åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿›è¡Œï¼Œä½†æ˜¯ä¼šèµ°ä¸¤é id çš„ç”Ÿæˆæµç¨‹ï¼Œè¿™æ ·å°±ä¼šé€ æˆ id ä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿã€‚useId çš„å‡ºç°èƒ½æœ‰æ•ˆçš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><strong>useId åŸºæœ¬ç”¨æ³•:</strong></p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿæˆç¨³å®šçš„ id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{rid}&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>v18 ssr</strong></p><p>åœ¨ React v18 ä¸­ å¯¹ ssr å¢åŠ äº†æµå¼æ¸²æŸ“çš„ç‰¹æ€§ <a href="https://github.com/reactwg/react-18/discussions/37" target="_blank" rel="noreferrer">New Suspense SSR Architecture in React 18 </a>ï¼Œ é‚£ä¹ˆè¿™ä¸ªç‰¹æ€§æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š</p><p>åœ¨ä¼ ç»Ÿ React ssr ä¸­ï¼Œå¦‚æœæ­£å¸¸æƒ…å†µä¸‹ï¼Œ hydrate è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a96d5fa7247a4d8ab79bfe9f909c5f3f~tplv-k3u1fbpfcp-watermark.image?" alt="WechatIMG6936.jpeg"></p><p>åˆšå¼€å§‹çš„æ—¶å€™ï¼Œå› ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ï¼Œåªä¼šæ¸²æŸ“ html ç»“æ„ï¼Œæ­¤æ—¶è¿˜æ²¡æ³¨å…¥ js é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒç”¨ç°è‰²ä¸èƒ½äº¤äº’çš„æ¨¡å—è¡¨ç¤ºã€‚ï¼ˆå¦‚ä¸Šç°è‰²çš„æ¨¡å—ä¸èƒ½åšç”¨æˆ·äº¤äº’ï¼Œæ¯”å¦‚ç‚¹å‡»äº‹ä»¶ä¹‹ç±»çš„ã€‚ï¼‰</p><p>hydrate js åŠ è½½ä¹‹åï¼Œæ­¤æ—¶çš„æ¨¡å—å¯ä»¥æ­£å¸¸äº¤äº’ï¼Œæ‰€ä»¥ç”¨ç»¿è‰²çš„æ¨¡å—å±•ç¤ºã€‚</p><p>ä½†æ˜¯å¦‚æœå…¶ä¸­ä¸€ä¸ªæ¨¡å—ï¼ŒæœåŠ¡ç«¯è¯·æ±‚æ•°æ®ï¼Œæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œè€—è´¹æ—¶é—´é•¿ï¼Œæˆ‘ä»¬ä¸æœŸæœ›åœ¨æœåŠ¡ç«¯å®Œå…¨å½¢æˆ html ä¹‹ååœ¨æ¸²æŸ“ï¼Œé‚£ä¹ˆ React 18 ç»™äº†ä¸€ä¸ªæ–°çš„å¯èƒ½æ€§ã€‚å¯ä»¥ä½¿ç”¨ <code>&lt;Suspense&gt;</code> åŒ…è£…é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼Œç„¶åè®©è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹å…ˆæŒ‚èµ·ã€‚</p><p>æ¥ä¸‹æ¥ä¼šé€šè¿‡ script åŠ è½½ js çš„æ–¹å¼ æµå¼æ³¨å…¥ html ä»£ç çš„ç‰‡æ®µï¼Œæ¥è¡¥å……æ•´ä¸ªé¡µé¢ã€‚æ¥ä¸‹æ¥çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3bc06ab86554f92940e82d8f9d1a64c~tplv-k3u1fbpfcp-watermark.image?" alt="d94d8ddb-bdcd-4be8-a851-4927c7966b99.png"></p><p>åœ¨è¿™ä¸ªåŸç†åŸºç¡€ä¹‹ä¸Šï¼Œ React ä¸ªç‰¹æ€§å« Selective Hydrationï¼Œå¯ä»¥<strong>æ ¹æ®ç”¨æˆ·äº¤äº’æ”¹å˜ hydrate çš„é¡ºåº</strong>ã€‚</p><p>æ¯”å¦‚æœ‰ä¸¤ä¸ªæ¨¡å—éƒ½æ˜¯é€šè¿‡ Suspense æŒ‚èµ·çš„ï¼Œå½“ä¸¤ä¸ªæ¨¡å—å‘ç”Ÿäº¤äº’é€»è¾‘æ—¶ï¼Œä¼šæ ¹æ®äº¤äº’æ¥é€‰æ‹©æ€§åœ°æ”¹å˜ hydrate çš„é¡ºåºã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6ce39daec1347c9bb023fe1d0f13ada~tplv-k3u1fbpfcp-watermark.image?" alt="ede45613-9994-4e77-9f50-5b7c1faf1160.png"></p><p>å¦‚ä¸Š C D é€‰æ‹©æ€§çš„ hydrate å°±æ˜¯ Selective Hydration çš„ç»“æœã€‚é‚£ä¹ˆå›åˆ°ä¸»è§’ useId ä¸Šï¼Œå¦‚æœåœ¨ hydrate è¿‡ç¨‹ä¸­ï¼ŒC D æ¨¡å— id æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæ¯”å¦‚å¦‚ä¸‹ï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Demo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{id}&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é‚£ä¹ˆå¦‚æœç»„ä»¶æ˜¯ Selective Hydration , é‚£ä¹ˆæ³¨å†Œç»„ä»¶çš„é¡ºåºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æœ‰å¯èƒ½ä¸ç»Ÿä¸€ï¼Œè¿™æ ·è¡¨ç°å°±ä¼šä¸ä¸€è‡´äº†ã€‚é‚£ä¹ˆç”¨ useId åŠ¨æ€ç”Ÿæˆ id å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜äº§ç”Ÿäº†ï¼Œæ‰€ä»¥è¯´ useId ä¿éšœäº† React v18 ä¸­ <strong>streaming renderer ï¼ˆæµå¼æ¸²æŸ“ï¼‰</strong> ä¸­ id çš„ç¨³å®šæ€§ã€‚</p><h2 id="ä¸ƒ-æ€»ç»“" tabindex="-1">ä¸ƒ æ€»ç»“ <a class="header-anchor" href="#ä¸ƒ-æ€»ç»“" aria-label="Permalink to &quot;ä¸ƒ æ€»ç»“&quot;">â€‹</a></h2><p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº† React Hooks äº§ç”Ÿåˆè¡·ä»¥åŠ React Hooksï¼Œå¸Œæœ›çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„åŒå­¦ï¼Œå¯ä»¥è®°ä½æ¯ä¸€ä¸ª hooks çš„ä½¿ç”¨åœºæ™¯ï¼Œåœ¨é¡¹ç›®ä¸­ç†Ÿç»ƒä½¿ç”¨èµ·æ¥ã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-label="Permalink to &quot;å‚è€ƒæ–‡æ¡£&quot;">â€‹</a></h3><ul><li><a href="https://github.com/reactwg/react-18/discussions/37" target="_blank" rel="noreferrer">streamingÂ renderer</a></li><li><a href="https://juejin.cn/post/6864438643727433741" target="_blank" rel="noreferrer">react-hooks å¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></li><li><a href="https://juejin.cn/book/6945998773818490884" target="_blank" rel="noreferrer">React è¿›é˜¶å®è·µæŒ‡å—</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-09de1c0f><!--[--><!--]--><div class="edit-info" data-v-09de1c0f><div class="edit-link" data-v-09de1c0f><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Asplitline/tk-wiki/tree/master/docs/pages/reproduce/todo/20230620_3-react.md" target="_blank" rel="noreferrer" data-v-09de1c0f><!--[--><span class="vpi-square-pen edit-link-icon" data-v-09de1c0f></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-09de1c0f><p class="VPLastUpdated" data-v-09de1c0f data-v-7e05ebdb>Last updated: <time datetime="2023-06-20T15:11:02.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-09de1c0f><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link prev" href="/pages/reproduce/todo/20230620_2-react.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>Previous page</span><span class="title" data-v-09de1c0f>React æ·±å…¥ã€ä¸€æ–‡åƒé€React v18å…¨éƒ¨Apiï¼ˆ1.3w+ï¼‰</span><!--]--></a></div><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link next" href="/pages/reproduce/practice/base.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>Next page</span><span class="title" data-v-09de1c0f>åŸºç¡€ç¯‡</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>å¤‡æ¡ˆå·ï¼š<a href="https://beian.miit.gov.cn/" target="_blank">èœ€ICPå¤‡2022016215å·-1 	</a></p><!----></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"DRbtMCG2\",\"pages_advance_electron-base_index.md\":\"BaW1CuXQ\",\"pages_advance_react-base_index.md\":\"ClDAXapu\",\"pages_advance_ts-base_11.interface.md\":\"0Z7dlKU6\",\"pages_advance_index.md\":\"B7m3b6a0\",\"pages_advance_nextjs-base_pre-render.md\":\"CZVhpNL1\",\"pages_advance_nextjs-base_base.md\":\"DPsOa9uW\",\"pages_advance_nextjs-base_other-options.md\":\"B_XVK3qv\",\"pages_advance_react-parctice_index.md\":\"BSQ1Az1n\",\"pages_advance_ts-base_14.map_type.md\":\"B2HmD4TU\",\"pages_advance_uniapp-base_component.md\":\"Bv_boPQO\",\"pages_advance_react-parctice_base.md\":\"Ch0liJXS\",\"pages_advance_nextjs-base_routes-api.md\":\"DSxdeRKk\",\"pages_advance_uniapp-config_other.md\":\"JCNnfU1J\",\"pages_advance_ts-expand_vue2.md\":\"mz-_LOPv\",\"pages_advance_ts-expand_react.md\":\"lDwdssno\",\"pages_advance_vue3-guide_index.md\":\"DCKRF4Lt\",\"pages_advance_vue2-router_index.md\":\"BQUJC12_\",\"pages_advance_ts-base_3.function.md\":\"DEitKjUU\",\"pages_advance_uniapp-other_wx-compitable.md\":\"Dv4TlKPB\",\"pages_base_css-advance_index.md\":\"CHBfCZGs\",\"pages_advance_react-base_react-core.md\":\"ZT2rQl04\",\"pages_advance_ts-base_4.tuple.md\":\"aZFyfieF\",\"pages_advance_ts-base_7.type_inference.md\":\"B5ycNQ_H\",\"pages_advance_ts-base_6.type_assert.md\":\"k7gY_Fck\",\"pages_advance_ts-base_9.type_narrow.md\":\"Dc_a3yaN\",\"pages_advance_nextjs-base_index.md\":\"bKNs6u_U\",\"pages_advance_ts-base_index.md\":\"DkdgtED_\",\"pages_advance_ts-base_5.const.md\":\"DXEgs_6k\",\"pages_advance_react-parctice_three-party.md\":\"rPfLmCOt\",\"pages_advance_ts-base_1.intro.md\":\"yuqk-AY6\",\"pages_advance_ts-expand_base.md\":\"CfhiRcbi\",\"pages_advance_ts-base_13.index_type.md\":\"DDfT8RHz\",\"pages_advance_ts-expand_vue3.md\":\"xQ9Q6NX2\",\"pages_advance_uniapp-base_base.md\":\"Cp-xKVB_\",\"pages_advance_uniapp-base_config.md\":\"2YBzR1Ld\",\"pages_advance_uniapp-config_index.md\":\"C_lEaPKR\",\"pages_advance_uniapp-base_index.md\":\"C6S4c7i0\",\"pages_advance_uniapp-base_framework_api.md\":\"Cc-M66mI\",\"pages_advance_uniapp-config_manifest.md\":\"B0GwFddv\",\"pages_advance_ts-base_16.style_guide.md\":\"wVaB2TTy\",\"pages_advance_ts-base_17.reference.md\":\"Bojd95jA\",\"pages_advance_react-base_react-router.md\":\"C30z25pv\",\"pages_advance_uniapp-base_api.md\":\"DAbPpzDV\",\"pages_advance_ts-expand_index.md\":\"C6S2wOxP\",\"pages_advance_ts-expand_essay.md\":\"CMuvedIN\",\"pages_advance_ts-base_12.generics.md\":\"hyLkY9fP\",\"pages_advance_uniapp-config_page.md\":\"CuSBXm9v\",\"pages_advance_vue2-guide_index.md\":\"YsiuoUZn\",\"pages_advance_uniapp-other_config.md\":\"PLmOq1hn\",\"pages_advance_uniapp-other_index.md\":\"C-eBOkv2\",\"pages_advance_uniapp-other_ios.md\":\"ClzcB0Ty\",\"pages_advance_uniapp-other_third-party.md\":\"BNAaQs4Y\",\"pages_advance_vue2-data_index.md\":\"CH7BhvLh\",\"pages_base_css-advance_styled-components.md\":\"DmmlCDv4\",\"pages_base_es6_10.operator.md\":\"C5Kw54hP\",\"pages_base_css_practice.md\":\"DvOr5Vz8\",\"pages_base_es6_11.symbol.md\":\"BsodzHpM\",\"pages_base_es6_14.reflect.md\":\"Bp_ik4N9\",\"pages_base_es6_1.babel.md\":\"D2Z2xk_P\",\"pages_base_es6_15.promise.md\":\"C9gWkn_S\",\"pages_advance_ts-base_10.custom_type.md\":\"CylFFjv0\",\"pages_base_es6_16.iterator-forof.md\":\"CQoQCTH1\",\"pages_base_es6_24.style.md\":\"DpI0PzDB\",\"pages_base_es6_18.generator-async.md\":\"BqFyWK8P\",\"pages_base_es6_4.string.md\":\"BrV2svUa\",\"pages_base_es6_13.proxy.md\":\"DxxoyEQF\",\"pages_base_es6_22.module.md\":\"BtrEya6_\",\"pages_advance_ts-expand_other.md\":\"DQLG_9Vb\",\"pages_advance_ts-base_15.build-in_tools_type.md\":\"BBLYVPAA\",\"pages_base_es6_19.async.md\":\"RjXkx04N\",\"pages_advance_ts-base_2.type.md\":\"DJdL6Ig2\",\"pages_base_css_index.md\":\"Cn3BnGL-\",\"pages_base_html_practice.md\":\"CUKWOYcJ\",\"pages_advance_react-base_react-hook.md\":\"DwyECWeD\",\"pages_base_css-advance_postcss.md\":\"d0t40l0N\",\"pages_base_es6_index.md\":\"BkpgT1aW\",\"pages_base_index.md\":\"Bnw2rOqT\",\"pages_advance_react-base_react-advance.md\":\"CgzfyHpq\",\"pages_base_css_css-add.md\":\"Cw4AyvR0\",\"pages_base_es6_8.array.md\":\"CKwY_jO6\",\"pages_base_js-advance_ajax.md\":\"Bo-_H0wD\",\"pages_advance_electron-base_model.md\":\"CELI-uBA\",\"pages_advance_uniapp-other_practice.md\":\"Crze7mrX\",\"pages_advance_vue2-guide_reference.md\":\"wkDi6r3Y\",\"pages_advance_ts-base_8.type_widen.md\":\"BeAakBkp\",\"pages_advance_electron-base_guide.md\":\"C_hHLmwr\",\"pages_base_es6_17.generator.md\":\"CYMFlTpG\",\"pages_base_es6_2.let-const.md\":\"C8GfIG16\",\"pages_common_cli_npm.md\":\"CkoPlgz5\",\"pages_base_js_base.md\":\"BbWysuBq\",\"pages_devlog_index.md\":\"AIKpPUDP\",\"pages_devlog_error_polyfill-three-party.md\":\"DDpDSodl\",\"pages_devlog_error_polyfill.md\":\"CPhGNBie\",\"pages_expand_common_index.md\":\"CGd8Cx5B\",\"pages_devlog_error_style.md\":\"Bzm-s-OO\",\"pages_custom_config_windows.md\":\"DY0_bju3\",\"pages_expand_common_linux.md\":\"C_Mc9UkF\",\"pages_expand_common_nginx.md\":\"OFzlzZOd\",\"pages_expand_index.md\":\"NJoxolqp\",\"pages_custom_guide_index.md\":\"ClkL5P4Z\",\"pages_cli_build-tools_index.md\":\"DtjC5ztf\",\"pages_expand_rule_css-rule.md\":\"BxHwvTFn\",\"pages_expand_common_markdown.md\":\"DK4dPSMG\",\"pages_expand_rule_index.md\":\"BQuMJzrw\",\"pages_expand_skill_chrome.md\":\"VQ_HJnis\",\"pages_expand_skill_index.md\":\"DTlYG0im\",\"pages_expand_skill_fiddler.md\":\"D9sBaPhy\",\"pages_expand_skill_ios.md\":\"D9Zrz6Rq\",\"pages_expand_skill_pronunce.md\":\"BBrZ6iVR\",\"pages_reproduce_index.md\":\"Dmw8dxWI\",\"pages_expand_skill_window.md\":\"aZMqn2_6\",\"pages_reproduce_practice_base.md\":\"B7WlqApv\",\"pages_index.md\":\"C2WjFlov\",\"pages_reproduce_done_index.md\":\"CnJUlQeB\",\"pages_reproduce_practice_index.md\":\"BXKalDrY\",\"pages_cli_build-tools_env.md\":\"BpOZvY-r\",\"pages_reproduce_todo_20230422-websokect.md\":\"BIUv65pn\",\"pages_cli_index.md\":\"C9YgO2C8\",\"pages_cli_vite_base.md\":\"DIM81paI\",\"pages_base_nodejs_index.md\":\"o8fw0QBI\",\"pages_base_css_css.md\":\"CFu1Oxhk\",\"pages_base_es6_26.arraybuffer.md\":\"CYSkn0xW\",\"pages_cli_build-tools_lint.md\":\"BYB2tFMh\",\"pages_base_nodejs_system-module.md\":\"Ct3V9I0o\",\"pages_reproduce_todo_20230505-qiankun.md\":\"BX4oIEye\",\"pages_base_es6_12.set-map.md\":\"57Rj3FOI\",\"pages_base_es6_7.function.md\":\"Co9UPgge\",\"pages_cli_vite_vue.md\":\"DvRlZGAl\",\"pages_base_es6_6.number.md\":\"C85yZj1E\",\"pages_reproduce_todo_20230620_1-react.md\":\"wa4ipgdu\",\"pages_advance_electron-base_message.md\":\"B1ZLMJRa\",\"pages_reproduce_todo_20230620_3-react.md\":\"BGQgRvBA\",\"pages_base_es6_3.destructuring.md\":\"DX3B3TCD\",\"pages_advance_vue2-practice_three-party.md\":\"nUkvgiv5\",\"pages_base_es6_21.class-extends.md\":\"CUNr0bzD\",\"pages_cli_webpack_vue.md\":\"tAHjiMXQ\",\"pages_advance_vue2-router_base.md\":\"CnEpG47-\",\"pages_advance_vue2-guide_instance.md\":\"icmiLq8i\",\"pages_collect_index.md\":\"Buutjx5x\",\"pages_collect_202403_mental-health-oss-zh.md\":\"CexscU8G\",\"pages_base_js-practice_index.md\":\"DiesdzEy\",\"pages_base_js-practice_three-party.md\":\"CDsW_R6C\",\"pages_reproduce_todo_index.md\":\"DKF6f7cV\",\"pages_reproduce_todo_20230620_2-react.md\":\"rkD9K6lm\",\"pages_base_js_index.md\":\"Cz_Xal-G\",\"pages_advance_nextjs-base_dynamic-routes.md\":\"BbW0OcDb\",\"pages_collect_202403_index.md\":\"BblwgMvO\",\"pages_base_es6_25.async-iterator.md\":\"DyeEFjpe\",\"pages_advance_vue2-guide_transition-animation.md\":\"-5K9WeW1\",\"pages_custom_index.md\":\"lWXPn8_5\",\"pages_tk_index.md\":\"BOk4bU7S\",\"pages_common_cli_publish.md\":\"Do1oRPXE\",\"pages_common_cli_pnpm.md\":\"CnfZhm7d\",\"pages_tk_utils_index.md\":\"CW95CGqu\",\"pages_advance_vue2-practice_base.md\":\"D-UhgOhI\",\"pages_base_html_index.md\":\"uRDmvTT5\",\"pages_common_cli_yarn.md\":\"4mwRa9vy\",\"pages_common_deploy_deploy.md\":\"D8APRabU\",\"pages_base_css-advance_scss.md\":\"u1JZptqV\",\"pages_base_nodejs_thrid-party-module.md\":\"-mcJGuUW\",\"pages_tk_utils_base.md\":\"Dpd0ERFg\",\"pages_common_deploy_example.md\":\"BLmmQkwq\",\"pages_common_deploy_index.md\":\"BpHicXpB\",\"pages_common_index.md\":\"CtxZf1PK\",\"pages_common_other_index.md\":\"dT6TrSCn\",\"pages_common_deploy_nginx.md\":\"BFIYKk2x\",\"pages_common_other_java.md\":\"DJ8ijn9s\",\"pages_base_css_css3.md\":\"BDkBmePj\",\"pages_base_css_mobile.md\":\"tlTGPy0m\",\"pages_custom_program_index.md\":\"BT2FVIF5\",\"pages_custom_program_vscode.md\":\"BtgSmxjP\",\"pages_devlog_error_index.md\":\"C5JGMuan\",\"pages_base_js_browser.md\":\"B4za-gZ_\",\"pages_devlog_error_issue.md\":\"Cq4IuVZa\",\"pages_devlog_error_other.md\":\"C-efuSHs\",\"pages_devlog_error_polyfill-system.md\":\"CdDqHB4F\",\"pages_base_es6_9.object.md\":\"CC_CVdjx\",\"pages_advance_vue2-practice_index.md\":\"CN6P8F9N\",\"pages_base_nodejs_module.md\":\"IR5ZTUA-\",\"pages_demo_index.md\":\"BcHEVIqE\",\"pages_custom_guide_macbook.md\":\"0iqzrdfC\",\"pages_common_version-control_github.md\":\"CPoH-zKI\",\"pages_common_version-control_index.md\":\"DJ6dpyGK\",\"pages_base_js-advance_regexp.md\":\"D-9pqIDX\",\"pages_custom_config_index.md\":\"BloT_osx\",\"pages_base_js-advance_index.md\":\"Cuyu6oDS\",\"pages_custom_config_keyboard.md\":\"NvmwO8iS\",\"pages_base_es6_5.regex.md\":\"DrJKHcgN\",\"pages_custom_program_chrome.md\":\"B2fYbSbQ\",\"pages_base_js-practice_handwrite.md\":\"M1lR1ZVd\",\"pages_base_js-practice_base.md\":\"CZa7h3TE\",\"pages_common_version-control_config.md\":\"CBlhe0pV\",\"pages_advance_vue2-data_vuex.md\":\"ChJZbqv-\",\"pages_common_version-control_git.md\":\"B0iF3xKb\",\"pages_base_es6_23.module-loader.md\":\"NYyPRXmR\",\"pages_common_cli_apply.md\":\"idTo2ZXh\",\"pages_common_cli_index.md\":\"BsJZ8KIN\",\"pages_cli_webpack_index.md\":\"DN3SUi8H\",\"pages_base_es6_27.decorator.md\":\"NzVoCzl7\",\"pages_cli_webpack_base.md\":\"gKNe_YO_\",\"pages_cli_vite_index.md\":\"Ctdqw1Cl\",\"pages_base_es6_20.class-base.md\":\"C6tIHTZ3\",\"pages_base_es6_28.proposals.md\":\"DBdmOTH7\",\"pages_cli_webpack_react.md\":\"BDIpRwxX\",\"pages_advance_vue2-guide_components.md\":\"1grTM2uz\",\"pages_advance_vue2-guide_reusability-composition.md\":\"BR1jXYlL\",\"pages_advance_vue2-router_advance.md\":\"Doka94Qi\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Tk  Wiki\",\"description\":\"Tk Wiki\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo-text.svg\",\"outline\":\"deep\",\"nav\":[{\"text\":\"å‰ç«¯åŸºç¡€\",\"link\":\"/pages/base/index\",\"activeMath\":\"/pages//base/\"},{\"text\":\"å‰ç«¯è¿›é˜¶\",\"link\":\"/pages/advance/index\",\"activeMath\":\"/pages/advance/\"},{\"text\":\"å‰ç«¯é€šè¯†\",\"link\":\"/pages/common/index\",\"activeMath\":\"/common/\"},{\"text\":\"é…ç½®\",\"items\":[{\"text\":\"è„šæ‰‹æ¶\",\"link\":\"/pages/cli/index\",\"activeMath\":\"/cli/\"},{\"text\":\"ä¸ªäººé…ç½®\",\"link\":\"/pages/custom/index\",\"activeMath\":\"/custom/\"},{\"text\":\"çŸ¥è¯†æ‰©å±•\",\"link\":\"/pages/expand/index\",\"activeMath\":\"/expand/\"}]},{\"text\":\"å…¶ä»–\",\"items\":[{\"text\":\"å¼€å‘æ—¥å¿—\",\"link\":\"/pages/devlog/index\",\"activeMath\":\"/devlog/\"},{\"text\":\"è½¬è½½æ–‡ç« \",\"link\":\"/pages/reproduce/index\",\"activeMath\":\"/reproduce/\"},{\"text\":\"tkåº“\",\"link\":\"/pages/tk/index\",\"activeMath\":\"/tk/\"}]},{\"text\":\"2024\",\"items\":[{\"text\":\"202403\",\"link\":\"/pages/collect/202403/index\",\"activeMath\":\"/collect/\"}]}],\"editLink\":{\"pattern\":\"https://github.com/Asplitline/tk-wiki/tree/master/docs/:path\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ\"},\"sidebar\":{\"/pages/advance\":[{\"text\":\"electron æŒ‡å—\",\"collapsible\":true,\"items\":[{\"text\":\"å…¥é—¨\",\"link\":\"/pages/advance/electron-base/guide\",\"order\":1},{\"text\":\"æµç¨‹æ¨¡å‹\",\"link\":\"/pages/advance/electron-base/model\",\"order\":2},{\"text\":\"è¿›ç¨‹é—´é€šä¿¡\",\"link\":\"/pages/advance/electron-base/message\",\"order\":3}],\"order\":1,\"group\":\"electron\"},{\"text\":\"React\",\"collapsible\":true,\"items\":[{\"text\":\"React æ ¸å¿ƒ\",\"link\":\"/pages/advance/react-base/react-core\",\"order\":2},{\"text\":\"React Hook\",\"link\":\"/pages/advance/react-base/react-hook\",\"order\":2},{\"text\":\"React è¿›é˜¶\",\"link\":\"/pages/advance/react-base/react-advance\",\"order\":3},{\"text\":\"React Router\",\"link\":\"/pages/advance/react-base/react-router\",\"order\":4}],\"order\":1,\"group\":\"react\"},{\"text\":\"Uniapp\",\"collapsible\":true,\"items\":[{\"text\":\"å…¥é—¨\",\"link\":\"/pages/advance/uniapp-base/base\",\"order\":1},{\"text\":\"ç»„ä»¶\",\"link\":\"/pages/advance/uniapp-base/component\",\"order\":2},{\"text\":\"é…ç½®\",\"link\":\"/pages/advance/uniapp-base/config\",\"order\":2},{\"text\":\"é€šç”¨Api\",\"link\":\"/pages/advance/uniapp-base/api\",\"order\":3},{\"text\":\"æ¡†æ¶Api\",\"link\":\"/pages/advance/uniapp-base/framework_api\",\"order\":4}],\"order\":1,\"group\":\"uniapp\"},{\"text\":\"æŒ‡å—\",\"collapsible\":true,\"items\":[{\"text\":\"Vue åŸºç¡€\",\"link\":\"/pages/advance/vue2-guide/instance\",\"order\":1},{\"text\":\"æ·±å…¥äº†è§£ç»„ä»¶\",\"link\":\"/pages/advance/vue2-guide/components\",\"order\":2},{\"text\":\"è¿‡æ¸¡ & åŠ¨ç”»\",\"link\":\"/pages/advance/vue2-guide/transition-animation\",\"order\":3},{\"text\":\"ç›¸å…³é“¾æ¥\",\"link\":\"/pages/advance/vue2-guide/reference\",\"order\":4},{\"text\":\"å¯å¤ç”¨æ€§ & ç»„åˆ\",\"link\":\"/pages/advance/vue2-guide/reusability-composition\",\"order\":4}],\"order\":1,\"group\":\"vue2\"},{\"text\":\"é…ç½®\",\"collapsible\":true,\"items\":[{\"text\":\"page.json\",\"link\":\"/pages/advance/uniapp-config/page\",\"order\":1},{\"text\":\"manifest.json\",\"link\":\"/pages/advance/uniapp-config/manifest\",\"order\":2},{\"text\":\"å…¶ä»–é…ç½®\",\"link\":\"/pages/advance/uniapp-config/other\",\"order\":3}],\"order\":2,\"group\":\"uniapp\"},{\"text\":\"è·¯ç”±\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/advance/vue2-router/base\",\"order\":1},{\"text\":\"è¿›é˜¶\",\"link\":\"/pages/advance/vue2-router/advance\",\"order\":2}],\"order\":2,\"group\":\"vue2\"},{\"text\":\"å…¶ä»–\",\"collapsible\":true,\"items\":[{\"text\":\"é…ç½®ç›¸å…³\",\"link\":\"/pages/advance/uniapp-other/config\",\"order\":1},{\"text\":\"å®è·µæ€»ç»“\",\"link\":\"/pages/advance/uniapp-other/practice\",\"order\":2},{\"text\":\"ä¸‰æ–¹åº“ä½¿ç”¨\",\"link\":\"/pages/advance/uniapp-other/third-party\",\"order\":3},{\"text\":\"å¾®ä¿¡å°ç¨‹åºå…¼å®¹æ€§\",\"link\":\"/pages/advance/uniapp-other/wx-compitable\",\"order\":4},{\"text\":\"IOS æ‰“åŒ…\",\"link\":\"/pages/advance/uniapp-other/ios\",\"order\":5}],\"order\":4,\"group\":\"uniapp\"},{\"text\":\"åŸºç¡€\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/advance/nextjs-base/base\",\"order\":2},{\"text\":\"é¢„æ¸²æŸ“å’Œæ•°æ®è·å–\",\"link\":\"/pages/advance/nextjs-base/pre-render\",\"order\":2},{\"text\":\"åŠ¨æ€è·¯ç”±\",\"link\":\"/pages/advance/nextjs-base/dynamic-routes\",\"order\":3},{\"text\":\"è·¯ç”±API\",\"link\":\"/pages/advance/nextjs-base/routes-api\",\"order\":4},{\"text\":\"å…¶ä»–é€‰é¡¹\",\"link\":\"/pages/advance/nextjs-base/other-options\",\"order\":5}],\"group\":\"nextjs\"},{\"text\":\"å®æˆ˜\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/advance/react-parctice/base\",\"order\":1},{\"text\":\"ä¸‰æ–¹åº“\",\"link\":\"/pages/advance/react-parctice/three-party\",\"order\":3}],\"group\":\"react\"},{\"text\":\"TypeScript åŸºç¡€\",\"collapsible\":true,\"items\":[{\"text\":\"ä»‹ç»\",\"link\":\"/pages/advance/ts-base/1.intro\",\"order\":1},{\"text\":\"ç±»å‹\",\"link\":\"/pages/advance/ts-base/2.type\",\"order\":2},{\"text\":\"å‡½æ•°\",\"link\":\"/pages/advance/ts-base/3.function\",\"order\":3},{\"text\":\"å…ƒç»„\",\"link\":\"/pages/advance/ts-base/4.tuple\",\"order\":4},{\"text\":\"å­—é¢é‡ç±»å‹\",\"link\":\"/pages/advance/ts-base/5.const\",\"order\":5},{\"text\":\"ç±»å‹æ–­è¨€\",\"link\":\"/pages/advance/ts-base/6.type_assert\",\"order\":6},{\"text\":\"ç±»å‹æ¨æ–­\",\"link\":\"/pages/advance/ts-base/7.type_inference\",\"order\":7},{\"text\":\"ç±»å‹æ‹“å®½\",\"link\":\"/pages/advance/ts-base/8.type_widen\",\"order\":8},{\"text\":\"ç±»å‹ç¼©å°\",\"link\":\"/pages/advance/ts-base/9.type_narrow\",\"order\":9},{\"text\":\"è‡ªå®šä¹‰ç±»å‹\",\"link\":\"/pages/advance/ts-base/10.custom_type\",\"order\":10},{\"text\":\"æ¥å£\",\"link\":\"/pages/advance/ts-base/11.interface\",\"order\":11},{\"text\":\"æ³›å‹\",\"link\":\"/pages/advance/ts-base/12.generics\",\"order\":12},{\"text\":\"ç´¢å¼•ç±»å‹\",\"link\":\"/pages/advance/ts-base/13.index_type\",\"order\":13},{\"text\":\"æ˜ å°„ç±»å‹\",\"link\":\"/pages/advance/ts-base/14.map_type\",\"order\":14},{\"text\":\"å†…ç½®å·¥å…·ç±»å‹\",\"link\":\"/pages/advance/ts-base/15.build-in_tools_type\",\"order\":15},{\"text\":\"é£æ ¼æŒ‡å—\",\"link\":\"/pages/advance/ts-base/16.style_guide\",\"order\":16},{\"text\":\"ç›¸å…³é“¾æ¥\",\"link\":\"/pages/advance/ts-base/17.reference\",\"order\":17}],\"group\":\"ts\"},{\"text\":\"TypeScript åº”ç”¨\",\"collapsible\":true,\"items\":[{\"text\":\"TS åŸºç¡€åº”ç”¨\",\"link\":\"/pages/advance/ts-expand/base\",\"order\":1},{\"text\":\"TS åœ¨ Vue2 ä¸­åº”ç”¨\",\"link\":\"/pages/advance/ts-expand/vue2\",\"order\":2},{\"text\":\"TS åœ¨ Vue3 ä¸­åº”ç”¨\",\"link\":\"/pages/advance/ts-expand/vue3\",\"order\":3},{\"text\":\"TS åœ¨ React ä¸­åº”ç”¨\",\"link\":\"/pages/advance/ts-expand/react\",\"order\":4},{\"text\":\"TS å…¶ä»–åº”ç”¨\",\"link\":\"/pages/advance/ts-expand/other\",\"order\":5},{\"text\":\"TS æ‚è°ˆ\",\"link\":\"/pages/advance/ts-expand/essay\",\"order\":6}],\"group\":\"ts\"},{\"text\":\"æ•°æ®å¤„ç†\",\"collapsible\":true,\"items\":[{\"text\":\"Vuex\",\"link\":\"/pages/advance/vue2-data/vuex\",\"order\":1}],\"group\":\"vue2\"},{\"text\":\"å®æˆ˜\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/advance/vue2-practice/base\",\"order\":1},{\"text\":\"ä¸‰æ–¹åº“\",\"link\":\"/pages/advance/vue2-practice/three-party\",\"order\":3}],\"group\":\"vue2\"}],\"/pages/base\":[{\"text\":\"HTML\",\"collapsible\":true,\"items\":[{\"text\":\"HTML å®æˆ˜\",\"link\":\"/pages/base/html/practice\",\"order\":1}],\"order\":1,\"group\":\"html\"},{\"text\":\"JavaScript\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€çŸ¥è¯†\",\"link\":\"/pages/base/js/base\",\"order\":1},{\"text\":\"æµè§ˆå™¨ API\",\"link\":\"/pages/base/js/browser\",\"order\":2}],\"order\":1,\"group\":\"js\"},{\"text\":\"CSS\",\"collapsible\":true,\"items\":[{\"text\":\"CSS\",\"link\":\"/pages/base/css/css\",\"order\":1},{\"text\":\"CSS3\",\"link\":\"/pages/base/css/css3\",\"order\":1},{\"text\":\"CSS ç§»åŠ¨ç«¯\",\"link\":\"/pages/base/css/mobile\",\"order\":3},{\"text\":\"CSS çŸ¥è¯†æ‰©å±•\",\"link\":\"/pages/base/css/css-add\",\"order\":4},{\"text\":\"CSS å®æˆ˜\",\"link\":\"/pages/base/css/practice\",\"order\":4}],\"order\":2,\"group\":\"css\"},{\"text\":\"ES6\",\"collapsible\":true,\"items\":[{\"text\":\"babel\",\"link\":\"/pages/base/es6/1.babel\",\"order\":1},{\"text\":\"let const\",\"link\":\"/pages/base/es6/2.let-const\",\"order\":2},{\"text\":\"å˜é‡ç»“æ„èµ‹å€¼\",\"link\":\"/pages/base/es6/3.destructuring\",\"order\":3},{\"text\":\"å­—ç¬¦ä¸²æ‰©å±•å’Œæ–°å¢æ–¹æ³•\",\"link\":\"/pages/base/es6/4.string\",\"order\":4},{\"text\":\"æ­£åˆ™æ‰©å±•\",\"link\":\"/pages/base/es6/5.regex\",\"order\":5},{\"text\":\"æ•°å€¼æ‰©å±•\",\"link\":\"/pages/base/es6/6.number\",\"order\":6},{\"text\":\"å‡½æ•°æ‰©å±•\",\"link\":\"/pages/base/es6/7.function\",\"order\":7},{\"text\":\"æ•°ç»„æ‰©å±•\",\"link\":\"/pages/base/es6/8.array\",\"order\":8},{\"text\":\"å¯¹è±¡æ‰©å±•\",\"link\":\"/pages/base/es6/9.object\",\"order\":9},{\"text\":\"è¿ç®—ç¬¦æ‰©å±•\",\"link\":\"/pages/base/es6/10.operator\",\"order\":10},{\"text\":\"Symbol\",\"link\":\"/pages/base/es6/11.symbol\",\"order\":11},{\"text\":\"Setå’ŒMap\",\"link\":\"/pages/base/es6/12.set-map\",\"order\":12},{\"text\":\"Proxy\",\"link\":\"/pages/base/es6/13.proxy\",\"order\":13},{\"text\":\"Reflect\",\"link\":\"/pages/base/es6/14.reflect\",\"order\":14},{\"text\":\"Promise\",\"link\":\"/pages/base/es6/15.promise\",\"order\":15},{\"text\":\"Iterator å’Œ for...of å¾ªç¯\",\"link\":\"/pages/base/es6/16.iterator-forof\",\"order\":16},{\"text\":\"Generator å‡½æ•°\",\"link\":\"/pages/base/es6/17.generator\",\"order\":17},{\"text\":\"Generator å¼‚æ­¥åº”ç”¨\",\"link\":\"/pages/base/es6/18.generator-async\",\"order\":18},{\"text\":\"async å‡½æ•°\",\"link\":\"/pages/base/es6/19.async\",\"order\":19},{\"text\":\"Class åŸºæœ¬è¯­æ³•\",\"link\":\"/pages/base/es6/20.class-base\",\"order\":20},{\"text\":\"Class ç»§æ‰¿\",\"link\":\"/pages/base/es6/21.class-extends\",\"order\":21},{\"text\":\"Module è¯­æ³•\",\"link\":\"/pages/base/es6/22.module\",\"order\":22},{\"text\":\"Module çš„åŠ è½½å®ç°\",\"link\":\"/pages/base/es6/23.module-loader\",\"order\":23},{\"text\":\"ç¼–ç¨‹é£æ ¼\",\"link\":\"/pages/base/es6/24.style\",\"order\":24},{\"text\":\"å¼‚æ­¥éå†å™¨\",\"link\":\"/pages/base/es6/25.async-iterator\",\"order\":25},{\"text\":\"ArrayBuffer\",\"link\":\"/pages/base/es6/26.arraybuffer\",\"order\":26},{\"text\":\"è£…é¥°å™¨\",\"link\":\"/pages/base/es6/27.decorator\",\"order\":27},{\"text\":\"æœ€æ–°ææ¡ˆ\",\"link\":\"/pages/base/es6/28.proposals\",\"order\":28}],\"order\":2,\"group\":\"js\"},{\"text\":\"CSSè¿›é˜¶\",\"collapsible\":true,\"items\":[{\"text\":\"SCSS\",\"link\":\"/pages/base/css-advance/scss\",\"order\":2},{\"text\":\"styled-components\",\"link\":\"/pages/base/css-advance/styled-components\",\"order\":3},{\"text\":\"postcss\",\"link\":\"/pages/base/css-advance/postcss\",\"order\":4}],\"order\":3,\"group\":\"css\"},{\"text\":\"Javascript æ‰©å±•\",\"collapsible\":true,\"items\":[{\"text\":\"æ­£åˆ™è¡¨è¾¾å¼\",\"link\":\"/pages/base/js-advance/regexp\",\"order\":1},{\"text\":\"Ajax\",\"link\":\"/pages/base/js-advance/ajax\",\"order\":3}],\"group\":\"js\"},{\"text\":\"Javascript å®æˆ˜\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/base/js-practice/base\",\"order\":2},{\"text\":\"æ‰‹å†™\",\"link\":\"/pages/base/js-practice/handwrite\",\"order\":3},{\"text\":\"ä¸‰æ–¹åº“\",\"link\":\"/pages/base/js-practice/three-party\",\"order\":4}],\"group\":\"js\"},{\"text\":\"NodeJs\",\"collapsible\":true,\"items\":[{\"text\":\"ç³»ç»Ÿæ¨¡å—\",\"link\":\"/pages/base/nodejs/system-module\",\"order\":1},{\"text\":\"ä¸‰æ–¹æ¨¡å—\",\"link\":\"/pages/base/nodejs/thrid-party-module\",\"order\":2},{\"text\":\"æ¨¡å—åŒ–\",\"link\":\"/pages/base/nodejs/module\",\"order\":3}],\"group\":\"js\"}],\"/pages/cli\":[{\"text\":\"Webpack\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/cli/webpack/base\",\"order\":1},{\"text\":\"Vue\",\"link\":\"/pages/cli/webpack/vue\",\"order\":2},{\"text\":\"React\",\"link\":\"/pages/cli/webpack/react\",\"order\":3}],\"order\":1},{\"text\":\"Vite\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/cli/vite/base\",\"order\":2},{\"text\":\"Vue\",\"link\":\"/pages/cli/vite/vue\",\"order\":3}],\"order\":2},{\"text\":\"æ„å»ºå·¥å…·\",\"collapsible\":true,\"items\":[{\"text\":\"Linters\",\"link\":\"/pages/cli/build-tools/lint\",\"order\":2},{\"text\":\"ä¸‰æ–¹åº“\",\"link\":\"/pages/cli/build-tools/env\",\"order\":3}],\"order\":3}],\"/pages/collect\":[{\"text\":2024.03,\"collapsible\":true,\"items\":[{\"text\":\"å¼€æºçš„å¿ƒç†å»ºè®¾\",\"link\":\"/pages/collect/202403/mental-health-oss-zh\"}]}],\"/pages/common\":[{\"text\":\"åŒ…ç®¡ç†\",\"collapsible\":true,\"items\":[{\"text\":\"npm\",\"link\":\"/pages/common/cli/npm\",\"order\":2},{\"text\":\"yarn\",\"link\":\"/pages/common/cli/yarn\",\"order\":3},{\"text\":\"pnpm\",\"link\":\"/pages/common/cli/pnpm\",\"order\":4},{\"text\":\"ç‰ˆæœ¬å‘å¸ƒ\",\"link\":\"/pages/common/cli/publish\",\"order\":5},{\"text\":\"åº”ç”¨\",\"link\":\"/pages/common/cli/apply\",\"order\":6}],\"order\":1},{\"text\":\"ç‰ˆæœ¬æ§åˆ¶\",\"collapsible\":true,\"items\":[{\"text\":\"Git\",\"link\":\"/pages/common/version-control/git\",\"order\":1},{\"text\":\"Github\",\"link\":\"/pages/common/version-control/github\",\"order\":2},{\"text\":\"é…ç½®ä¸å®æˆ˜\",\"link\":\"/pages/common/version-control/config\",\"order\":3}],\"order\":2},{\"text\":\"éƒ¨ç½²\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€éƒ¨ç½²\",\"link\":\"/pages/common/deploy/deploy\",\"order\":2},{\"text\":\"nginx\",\"link\":\"/pages/common/deploy/nginx\",\"order\":2},{\"text\":\"éƒ¨ç½²å®æˆ˜\",\"link\":\"/pages/common/deploy/example\",\"order\":3}],\"order\":3},{\"text\":\"å…¶ä»–\",\"collapsible\":true,\"items\":[{\"text\":\"-/-\",\"link\":\"/pages/common/other/java\"}],\"order\":4}],\"/pages/custom\":[{\"text\":\"åŸºç¡€é…ç½®\",\"collapsible\":true,\"items\":[{\"text\":\"å¿«æ·é”®\",\"link\":\"/pages/custom/config/keyboard\",\"order\":1},{\"text\":\"windows\",\"link\":\"/pages/custom/config/windows\",\"order\":2}],\"order\":1},{\"text\":\"ç¼–ç¨‹å·¥å…·\",\"collapsible\":true,\"items\":[{\"text\":\"vscode\",\"link\":\"/pages/custom/program/vscode\",\"order\":1},{\"text\":\"chrome devtool\",\"link\":\"/pages/custom/program/chrome\",\"order\":2}],\"order\":2},{\"text\":\"é…ç½®æŒ‡å—\",\"collapsible\":true,\"items\":[{\"text\":\"macbook è£…æœº\",\"link\":\"/pages/custom/guide/macbook\",\"order\":2}]}],\"/pages/demo\":[],\"/pages/devlog\":[{\"text\":\"é”™è¯¯æ±‡æ€»\",\"collapsible\":true,\"items\":[{\"text\":\"å…¼å®¹æ€§å¤„ç†\",\"link\":\"/pages/devlog/error/polyfill\",\"order\":1},{\"text\":\"ä¸‰æ–¹åº“å…¼å®¹æ€§\",\"link\":\"/pages/devlog/error/polyfill-three-party\",\"order\":2},{\"text\":\"æ ·å¼ç›¸å…³\",\"link\":\"/pages/devlog/error/style\",\"order\":3},{\"text\":\"å…¶ä»–é”™è¯¯\",\"link\":\"/pages/devlog/error/other\",\"order\":4},{\"text\":\"ä¸åŒæ“ä½œç³»ç»Ÿå¼€å‘å·®å¼‚\",\"link\":\"/pages/devlog/error/polyfill-system\",\"order\":5},{\"text\":\"issue æ•´ç†\",\"link\":\"/pages/devlog/error/issue\",\"order\":6}]}],\"/pages/expand\":[{\"text\":\"å¸¸è§\",\"collapsible\":true,\"items\":[{\"text\":\"nginx\",\"link\":\"/pages/expand/common/nginx\",\"order\":1},{\"text\":\"linux\",\"link\":\"/pages/expand/common/linux\",\"order\":2},{\"text\":\"markdown\",\"link\":\"/pages/expand/common/markdown\",\"order\":3}]},{\"text\":\"è§„èŒƒåŒ–\",\"collapsible\":true,\"items\":[{\"text\":\"CSS è§„èŒƒ\",\"link\":\"/pages/expand/rule/css-rule\",\"order\":2}]},{\"text\":\"å¥‡æ·«æŠ€å·§\",\"collapsible\":true,\"items\":[{\"text\":\"Window\",\"link\":\"/pages/expand/skill/window\",\"order\":2},{\"text\":\"IOS\",\"link\":\"/pages/expand/skill/ios\",\"order\":3},{\"text\":\"chrome\",\"link\":\"/pages/expand/skill/chrome\",\"order\":4},{\"text\":\"Fiddler - è½¬è½½\",\"link\":\"/pages/expand/skill/fiddler\",\"order\":5},{\"text\":\"ç¨‹åºå‘˜è‹±è¯­\",\"link\":\"/pages/expand/skill/pronunce\",\"order\":6}]}],\"/pages/reproduce\":[{\"text\":\"å¾…å½’æ¡£\",\"collapsible\":true,\"items\":[{\"text\":\"WebSocket ï½œæ¦‚å¿µã€åŸç†ã€ç”¨æ³•åŠå®è·µ\",\"link\":\"/pages/reproduce/todo/20230422-websokect\",\"order\":1},{\"text\":\"æˆ‘ç»ˆäºæŠŠå¾®å‰ç«¯(qiankun)è½åœ°ç”Ÿäº§é¡¹ç›®äº†\",\"link\":\"/pages/reproduce/todo/20230505-qiankun\",\"order\":2},{\"text\":\"ææ‡‚è¿™12ä¸ªHooksï¼Œä¿è¯è®©ä½ ç©è½¬React\",\"link\":\"/pages/reproduce/todo/20230620_1-react\",\"order\":3},{\"text\":\"React æ·±å…¥ã€ä¸€æ–‡åƒé€React v18å…¨éƒ¨Apiï¼ˆ1.3w+ï¼‰\",\"link\":\"/pages/reproduce/todo/20230620_2-react\",\"order\":4},{\"text\":\"ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ Hooks ä½¿ç”¨å¤§å…¨ ï¼ˆåŒ…å« React v18 ç‰ˆæœ¬ ï¼‰\",\"link\":\"/pages/reproduce/todo/20230620_3-react\",\"order\":5}],\"order\":1},{\"text\":\"ä»£ç å®è·µ\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€ç¯‡\",\"link\":\"/pages/reproduce/practice/base\",\"order\":2}]}],\"/pages/tk\":[{\"text\":\"tk-utils\",\"collapsible\":true,\"items\":[{\"text\":\"åŸºç¡€\",\"link\":\"/pages/tk/utils/base\",\"order\":1}]}]},\"footer\":{\"message\":\"å¤‡æ¡ˆå·ï¼š<a href=\\\"https://beian.miit.gov.cn/\\\" target=\\\"_blank\\\">èœ€ICPå¤‡2022016215å·-1 \\t</a>\",\"copyright\":\"\"},\"algolia\":{\"appId\":\"K106B03X2S\",\"apiKey\":\"087f59581f4c0842489cd49a5544ad71\",\"indexName\":\"wiki\",\"placeholder\":\"è¯·è¾“å…¥å…³é”®è¯\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>