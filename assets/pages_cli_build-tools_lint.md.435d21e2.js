import{_ as s,c as a,o as n,Q as l}from"./chunks/framework.8adc4ca2.js";const d=JSON.parse('{"title":"Linters","description":"","frontmatter":{"title":"Linters","order":2},"headers":[],"relativePath":"pages/cli/build-tools/lint.md","lastUpdated":1681488216000}'),o={name:"pages/cli/build-tools/lint.md"},p=l(`<h1 id="linters" tabindex="-1">Linters <a class="header-anchor" href="#linters" aria-label="Permalink to &quot;Linters&quot;">​</a></h1><h2 id="commitlint" tabindex="-1">Commitlint <a class="header-anchor" href="#commitlint" aria-label="Permalink to &quot;Commitlint&quot;">​</a></h2><p>描述：git commit 提交信息检查</p><p>文档：<a href="https://commitlint.js.org/" target="_blank" rel="noreferrer">https://commitlint.js.org/</a></p><p>仓库：<a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noreferrer">https://github.com/conventional-changelog/commitlint</a></p><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><ol><li>安装 commitlint 命令行 和 commitlint 通用配置</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/config-conventional</span></span></code></pre></div><ol start="2"><li>项目根目录下添加 config 文件</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">echo </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> commitlint</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span></code></pre></div><ol start="3"><li>配置 package，安装依赖后初始化 husky</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">prepare</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn husky install || npx husky install</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ol start="4"><li>安装 husky，husky 是 githook 辅助器</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">yarn add </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">dev husky</span></span></code></pre></div><ol start="5"><li>添加 commit hook</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;">EEE </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">husky</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">commit</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">msg</span></span>
<span class="line"><span style="color:#A6ACCD;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">sh</span></span>
<span class="line"><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\$</span><span style="color:#C3E88D;">(dirname </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\$0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">)/_/husky.sh</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">npx </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">no </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> commitlint </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">edit </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\$</span><span style="color:#C3E88D;">{1}</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">EEE</span></span></code></pre></div><blockquote><p>&lt;&lt;EEE ... EEE：用于多行文本输入，第一个 EEE 表示开始，第二个表示结束</p></blockquote><h2 id="eslint" tabindex="-1">Eslint <a class="header-anchor" href="#eslint" aria-label="Permalink to &quot;Eslint&quot;">​</a></h2><h3 id="基本配置" tabindex="-1">基本配置 <a class="header-anchor" href="#基本配置" aria-label="Permalink to &quot;基本配置&quot;">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">env: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   browser</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">   es6</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">   node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">rules: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &#39;no-console&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> p<wbr>rocess.env.NODE_ENV === &#39;production&#39; ? &#39;warn&#39; : &#39;off&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &#39;no-debugger&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> p<wbr>rocess.env.NODE_ENV === &#39;production&#39; ? &#39;warn&#39; : &#39;off&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">no-tabs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">eol-last</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">space-before-function-paren</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">indent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">off</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">parserOptions: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    ecmaVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2020</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    sourceType</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> &#39;module&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span></code></pre></div><h3 id="常见错误" tabindex="-1">常见错误 <a class="header-anchor" href="#常见错误" aria-label="Permalink to &quot;常见错误&quot;">​</a></h3><table><thead><tr><th>错误</th><th>解决</th></tr></thead><tbody><tr><td>error Unexpected tab character</td><td>&quot;no-tabs&quot;: 0</td></tr><tr><td>Newline required at end of file but not found</td><td>eol-last: 0</td></tr><tr><td>Missing space before function parentheses</td><td>&quot;space-before-function-paren&quot;: 0,</td></tr><tr><td>Expected indentation of 2 spaces but found 1 tab</td><td>&quot;indent&quot;: &quot;off&quot;</td></tr><tr><td>&#39;require&#39; and &#39;process&#39; is not defined</td><td>node: true</td></tr><tr><td>upgrade es version</td><td>ecmaVersion: 2020</td></tr></tbody></table><h3 id="错误整理" tabindex="-1">错误整理 <a class="header-anchor" href="#错误整理" aria-label="Permalink to &quot;错误整理&quot;">​</a></h3><h4 id="废除多个规则" tabindex="-1">废除多个规则 <a class="header-anchor" href="#废除多个规则" aria-label="Permalink to &quot;废除多个规则&quot;">​</a></h4><p>同时废除多个规则<code>, </code>号隔开</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// eslint-disable-next-line no-multi-assign,new-cap</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> widget </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> (window </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TradingView</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">widget</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> datafeed </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><h4 id="warning-delete-cr" tabindex="-1">warning Delete <code>CR</code> <a class="header-anchor" href="#warning-delete-cr" aria-label="Permalink to &quot;warning Delete \`CR\`&quot;">​</a></h4><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&#39;prettier/prettier&#39;: </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  &#39;error&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    endOfLine</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">&#39;auto&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">,</span></span></code></pre></div><h4 id="禁用-min-js-报错" tabindex="-1">禁用 min.js 报错 <a class="header-anchor" href="#禁用-min-js-报错" aria-label="Permalink to &quot;禁用 min.js 报错&quot;">​</a></h4><ol><li>禁入导入报错</li><li>禁用文件报错</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// eslint-disable-next-line import/extensions</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lib/charting_library/charting_library.min.js</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/* eslint-disable */</span></span></code></pre></div><h4 id="false-positive-of-no-shadow-rule-with-enums" tabindex="-1">False positive of no-shadow rule with ENUMs <a class="header-anchor" href="#false-positive-of-no-shadow-rule-with-enums" aria-label="Permalink to &quot;False positive of no-shadow rule with ENUMs&quot;">​</a></h4><p>问题：使用 enum 时报错</p><p>解决：禁用 no-shadow</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">no-shadow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">off</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">@typescript-eslint/no-shadow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="eslint-prettier" tabindex="-1">Eslint-prettier <a class="header-anchor" href="#eslint-prettier" aria-label="Permalink to &quot;Eslint-prettier&quot;">​</a></h3><p>在 eslint 中重写 prettier</p><p>文档：<a href="https://github.com/prettier/prettier-eslint" target="_blank" rel="noreferrer">https://github.com/prettier/prettier-eslint</a></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">prettier/prettier</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">: [</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        endOfLine</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        quoteProps</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">as-needed</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="changelog" tabindex="-1">Changelog <a class="header-anchor" href="#changelog" aria-label="Permalink to &quot;Changelog&quot;">​</a></h2><p>文档：<a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noreferrer">https://github.com/conventional-changelog/conventional-changelog</a></p><p>相关链接：<a href="https://zhuanlan.zhihu.com/p/51894196" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/51894196</a></p><ol><li>安装 changelog-cli</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">conventional-changelog-cli</span></span></code></pre></div><ol start="2"><li>在 package.json 添加如下 scripts</li></ol><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">changelog</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">conventional-changelog -p angular -i CHANGELOG.md -s -r 0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>参数说明</p><p>-p：指定使用的 commit message 标准</p><p>-i：从 CHANGELOG.md 读取 changelog</p><p>-s：读写 changelog 为同一文件</p><p>-r：release 版本数，默认为 0，1 表示全部</p>`,52),e=[p];function t(c,r,i,D,y,F){return n(),a("div",null,e)}const h=s(o,[["render",t]]);export{d as __pageData,h as default};
